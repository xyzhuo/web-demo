<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>加载MVT矢量地图</title>
    <!-- 本地引入依赖 -->
    <link href="../../lib/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="../../lib/Cesium/Cesium.js"></script>

    <!-- 使用远程依赖 -->
    <!-- <link href="http://47.107.49.127:8090/iserver/services/3D-xihaian/rest/static/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="http://47.107.49.127:8090/iserver/services/3D-xihaian/rest/static/Build/Cesium/Cesium.js"></script> -->

    <!-- Earth -->
    <!--<link href="http://www.supermapol.com/earth/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script type="text/javascript" src="http://www.supermapol.com/earth/Build/Cesium/Cesium.js"></script>-->

    <!--<script src="http://support.supermap.com.cn:8090/webgl/examples/webgl/js/supermap/SuperMap-7.1-11828.js"></script>-->

    <!--<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>-->
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }
        
        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="cesiumContainer"></div>

    <script type="text/javascript">
        /**
         * https://www.jianshu.com/p/5a74c607a591
         * 
         * （1）创建Primitive：使用主要使用Cesium.Primitive();
         * （2）添加Primitive：Viewer.primitives.add();
         * （3）删除Primitive：Viewer.primitives.remove(primitive)，removeAll()，removeById(id)
         * （4）获取Primitive：Viewer.primitives.getById(id) 
         * 
         *      Primitive:
         *          geometryInstances:
         *              geometry: // 指定Geometry几何类型
         *                  PolygonGeometry // 多边形
         *                  RectangleGeometry // 矩形
         *                  EllipseGeometry // 椭圆形
         *                  CircleGeometry // 圆
         *                  WallGeometry // 墙
         *                  SimplePolylineGeometry // 折线
         *                  BoxGeometry // 立方体
         *                  EllipsoidGeometry // 球形
         * 
         *      Primitive的属性：
         *          show（是否显示）、position（位置）、orientation（方向）、viewFrom（实体对象的建议初始偏移量）
         *      Primitive的类型：可以同时有多个
         *          point（点）、polyline（折线）、polygon（多边形）、rectangle（矩形）、
         *          billboard（广告牌）、box（盒子[立方体]）、label（标签）、model（模型）、
         *          ellipsoid（椭球体）、path（路径）、cylinder（圆柱体）、ellipse（椭圆形）、
         *          polylineVolume（多段线柱体）、wall（围墙）、corridor（走廊对象）
         *      Primitive的位置：
         *          classificationType: Cesium.ClassificationType.S3M_TILE // 贴在S3M模型表面
         *          clampToS3M()：Primitive贴到S3M(模型)上
         *          heightReference：默认值 HeightReference.NONE，Primitive贴地。在Primitive的实际类型中设置。
         * 
         * 
         */

        /**
         * Entity与Primitive的区别
         *      （1）entity偏向数据,primitive偏向图形.primitive更底层
         *      （2）entity用法简单，primitive用法复杂。我们会有这样的疑问：entity已经封装的如此完美，调用如此便捷，为何还要primitive接口呢？区别就是加载效率。primitive更接近webgl底层，没有entity各种各样的附加属性，因此在加载时效率会更高
         */

        let viewer = new Cesium.Viewer('cesiumContainer');
        let scene = viewer.scene;

        // scene的图元集合
        let primitiveColliction = scene.primitives;

        const instances = [];

        for (let lon = -180.0; lon < 180.0; lon += 5.0) {
            for (let lat = -85.0; lat < 85.0; lat += 5.0) {
                instances.push(new Cesium.GeometryInstance({
                    geometry: new Cesium.RectangleGeometry({
                        rectangle: Cesium.Rectangle.fromDegrees(lon, lat, lon + 5.0, lat + 5.0),
                        vertexFormat: Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,
                        height: 500
                    }),
                    attributes: { // 设置材质，指定颜色
                        color: Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.fromRandom({
                            alpha: 0.5
                        }))
                    }
                }));
            }
        }

        primitiveColliction.add(new Cesium.Primitive({
            geometryInstances: instances,
            appearance: new Cesium.PerInstanceColorAppearance()
        }));
    </script>
</body>

</html>