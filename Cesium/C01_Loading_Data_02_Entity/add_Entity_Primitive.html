<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Entity与Primitive的区别</title>
    <!-- 本地引入依赖 -->
    <link href="../../lib/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="../../lib/Cesium/Cesium.js"></script>

    <!-- 使用远程依赖 -->
    <!-- <link href="http://47.107.49.127:8090/iserver/services/3D-xihaian/rest/static/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="http://47.107.49.127:8090/iserver/services/3D-xihaian/rest/static/Build/Cesium/Cesium.js"></script> -->

    <!-- Earth -->
    <!--<link href="http://www.supermapol.com/earth/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script type="text/javascript" src="http://www.supermapol.com/earth/Build/Cesium/Cesium.js"></script>-->

    <!--<script src="http://support.supermap.com.cn:8090/webgl/examples/webgl/js/supermap/SuperMap-7.1-11828.js"></script>-->

    <!--<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>-->
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }
        
        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="cesiumContainer"></div>

    <script type="text/javascript">
        /**
         * Entity与Primitive的区别
         *      （1）entity偏向数据,primitive偏向图形.primitive更底层
         *      （2）entity用法简单，primitive用法复杂。我们会有这样的疑问：entity已经封装的如此完美，调用如此便捷，为何还要primitive接口呢？区别就是加载效率。primitive更接近webgl底层，没有entity各种各样的附加属性，因此在加载时效率会更高
         */

        let viewer = new Cesium.Viewer("cesiumContainer");
        let scene = viewer.scene;


        // 分别用entity和primitive方式绘制6300个圆。
        // // （1）Entity
        // for (let lon = -180.0; lon < 180.0; lon += 2.0) {
        //     for (let lat = -70.0; lat < 70.0; lat += 2.0) {
        //         viewer.entities.add({
        //             position: Cesium.Cartesian3.fromDegrees(lon, lat),
        //             ellipse: {
        //                 semiMinorAxis: 20000.0,
        //                 semiMajorAxis: 20000.0,
        //                 //height: 200000.0,
        //                 material: Cesium.Color.RED
        //             }
        //         });
        //     }
        // }

        // （2）Primitive
        let instances = [];
        for (let lon = -180.0; lon < 180.0; lon += 2.0) {
            for (let lat = -80.0; lat < 80.0; lat += 2.0) {
                let ellipse = new Cesium.EllipseGeometry({
                    center: Cesium.Cartesian3.fromDegrees(lon, lat),
                    semiMajorAxis: 20000.0,
                    semiMinorAxis: 20000.0,
                    height: 1,
                    vertexFormat: Cesium.VertexFormat.POSITION_AND_NORMAL // POSITION_AND_ST
                });
                let geometry = Cesium.EllipseGeometry.createGeometry(ellipse);
                let ellipseInstance = new Cesium.GeometryInstance({
                    geometry: geometry,
                    attributes: {
                        color: Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.RED)
                    }
                });
                instances.push(ellipseInstance);
            }
        }
        viewer.scene.primitives.add(new Cesium.Primitive({
            geometryInstances: instances,
            appearance: new Cesium.PerInstanceColorAppearance(),
            asynchronous: false
        }));
    </script>
</body>

</html>