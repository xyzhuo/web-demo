<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Entity-点</title>

    <!-- 本地引入依赖 -->
    <link href="../lib/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="../lib/Cesium/Cesium.js"></script>

    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="cesiumContainer"></div>

    <script type="text/javascript">
        /**
         * 参考博客：https://zhuanlan.zhihu.com/p/348807058
         * */
        /**
         * （1）创建Entity：使用主要使用Cesium.Entity();
         * （2）添加Entity：Viewer.entities.add();
         * （3）删除Entity：Viewer.entities.remove(entity)，removeAll()，removeById(id)
         * （4）获取Entity：Viewer.entities.getById(id)
         *
         *      Entity的属性：
         *          show（是否显示）、position（位置）、orientation（方向）、viewFrom（实体对象的建议初始偏移量）
         *      Entity的类型：可以同时有多个
         *          point（点）、polyline（折线）、polygon（多边形）、rectangle（矩形）、
         *          billboard（广告牌）、box（盒子[立方体]）、label（标签）、model（模型）、
         *          ellipsoid（椭球体）、path（路径）、cylinder（圆柱体）、ellipse（椭圆形）、
         *          polylineVolume（多段线柱体）、wall（围墙）、corridor（走廊对象）
         *      Entity的位置：
         *          classificationType: Cesium.ClassificationType.S3M_TILE // 贴在S3M模型表面
         *          clampToS3M()：Entity贴到S3M(模型)上
         *          heightReference：默认值 HeightReference.NONE，Entity贴地。在Entity的实际类型中设置。
         */
        const viewer = new Cesium.Viewer("cesiumContainer", {
            infoBox: false
        });

        // 加载地形
        viewer.terrainProvider = Cesium.createWorldTerrain({
            url: Cesium.IonResource.fromAssetId(3956),
            // url: "https://www.supermapol.com/iserver/services/3D-stk_terrain/rest/realspace/datas/info/data/path/",
            requestWaterMask: true, //开启法向量，请求水体效果所需要的海岸线数据
            requestVertexNormals: true, //开启水面特效，请求地形照明数据
        });

        const pointEntity = viewer.entities.add({
            id: "id-123", // Entity的id，如果不设置自动生成。Cesium.createGuid()生成器
            name: "entityName", // Entity的名称，可不设置
            show: true, // Entity是否显示，默认true
            position: Cesium.Cartesian3.fromDegrees(110.0, 21.0, 10), // Entity的位置，一般用一个点表示位置的元素都要设置position属性
            point: {
                color: Cesium.Color.RED.withAlpha(0.5), // 设置点的颜色
                pixelSize: 10, // 点的大小
                outlineColor: Cesium.Color.BLACK, // 点的轮廓色
                outlineWidth: 2, // 点的轮廓大小
                // scaleByDistance: new Cesium.NearFarScalar(2000, 1, 10000, 0), // 设置相机缩放点的大小变化：可以实现远小近大的效果。相机高度为10000米时设置0，即不可见。
                // // scaleByDistance: Cesium.NearFarScalar(1.5e2, 2.0, 1.5e5, 0), // e2表示10的2次方
                // translucencyByDistance: new Cesium.NearFarScalar(2000, 1, 10000, 0), // 设置相机缩放点的透明度变化：可以拉远模糊效果
                // 设置为零时，将始终应用深度测试。设置为Number.POSITIVE_INFINITY时，永远不会应用深度测试。
                // disableDepthTestDistance: Number.POSITIVE_INFINITY, // 避免被地形遮挡
                distanceDisplayCondition: new Cesium.DistanceDisplayCondition(50, 10000) // 在指定相机高度范围中显示点，这里是高度在50-10000之间显示点
            }
        });

        // 定位到Entity
        viewer.flyTo(pointEntity);
    </script>
</body>

</html>