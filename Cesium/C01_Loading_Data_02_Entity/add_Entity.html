<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>加载MVT矢量地图</title>
    <!-- 本地引入依赖 -->
    <link href="../../lib/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="../../lib/Cesium/Cesium.js"></script>

    <!-- 使用远程依赖 -->
    <!-- <link href="http://47.107.49.127:8090/iserver/services/3D-xihaian/rest/static/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="http://47.107.49.127:8090/iserver/services/3D-xihaian/rest/static/Build/Cesium/Cesium.js"></script> -->

    <!-- Earth -->
    <!--<link href="http://www.supermapol.com/earth/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script type="text/javascript" src="http://www.supermapol.com/earth/Build/Cesium/Cesium.js"></script>-->

    <!--<script src="http://support.supermap.com.cn:8090/webgl/examples/webgl/js/supermap/SuperMap-7.1-11828.js"></script>-->

    <!--<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>-->
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }
        
        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="cesiumContainer"></div>

    <script type="text/javascript">
        /**
         * 参考博客：https://zhuanlan.zhihu.com/p/348807058
         * */
        /**
         * （1）创建Entity：使用主要使用Cesium.Entity();
         * （2）添加Entity：Viewer.entities.add();
         * （3）删除Entity：Viewer.entities.remove(entity)，removeAll()，removeById(id)
         * （4）获取Entity：Viewer.entities.getById(id) 
         * 
         *      Entity的属性：
         *          show（是否显示）、position（位置）、orientation（方向）、viewFrom（实体对象的建议初始偏移量）
         *      Entity的类型：可以同时有多个
         *          point（点）、polyline（折线）、polygon（多边形）、rectangle（矩形）、
         *          billboard（广告牌）、box（盒子[立方体]）、label（标签）、model（模型）、
         *          ellipsoid（椭球体）、path（路径）、cylinder（圆柱体）、ellipse（椭圆形）、
         *          polylineVolume（多段线柱体）、wall（围墙）、corridor（走廊对象）
         *      Entity的位置：
         *          classificationType: Cesium.ClassificationType.S3M_TILE // 贴在S3M模型表面
         *          clampToS3M()：Entity贴到S3M(模型)上
         *          heightReference：默认值 HeightReference.NONE，Entity贴地。在Entity的实际类型中设置。
         */

        let viewer = new Cesium.Viewer('cesiumContainer');

        viewer.scene.postProcessStages.fxaa.enabled = false; //去锯齿 使文字清晰

        let boxEntity = viewer.entities.add({
            id: "id123", // id
            name: "entityName", // name
            show: true, // 设置整个Entity是否显示，默认true
            position: Cesium.Cartesian3.fromDegrees(117.0, 23.0, 300000.0), // Entity的位置
            box: {
                dimensions: new Cesium.Cartesian3(400000.0, 300000.0, 500000.0), // 立方体的长宽高
                material: Cesium.Color.RED.withAlpha(0.5), // 设置立方体的材质，可以是图片、颜色等，这里只设置了颜色。
                outline: true, // 显示立方体的边框
                outlineColor: Cesium.Color.BLACK, // 边框的颜色
                outlineWidth: 1.0, // 边框线的宽度
            },
            label: {
                // show: false, // 设置标签的显隐
                text: "这是一个标签",
            }
        });

        // 定位到Entity
        viewer.flyTo(boxEntity);

        const entity = viewer.entities.add({
            // id: "",
            name: "billboard",
            // show: true,
            // description: "",
            // orientation: "",
            position: Cesium.Cartesian3.fromDegrees(107.0, 23.0),
            billboard: {
                show: true, // default
                image: "./res/img/result.png", // default: undefined
                scale: 2.0, // default: 1.0
                //像素偏移    type: Cartesian2    default:Cartesian2.ZERO
                pixelOffset: new Cesium.Cartesian2(0, -50),
                //眼睛偏移    type: Cartesian3    default:Cartesian3.ZERO
                eyeOffset: new Cesium.Cartesian3(0.0, 0.0, 0.0),

                // 水平对齐方式  type: HorizontalOrigin  default:HorizontalOrigin.CENTER
                // CENTER 原点在对象的水平中心；LEFT 原点在对象的左侧；RIGHT 原点在对象的右侧
                horizontalOrigin: Cesium.HorizontalOrigin.CENTER,
                // 垂直对齐方式  type: VerticalOrigin  default:VerticalOrigin.CENTER
                // CENTER 原点位于 BASELINE 和 TOP 之间的垂直中心；BOTTOM 原点在对象的底部；
                // BASELINE 如果对象包含文本，则原点位于文本的基线，否则原点位于对象的底部；TOP 原点在对象的顶部
                verticalOrigin: Cesium.VerticalOrigin.BOTTOM, // default: CENTER 垂直对齐位置 参考Cesium.VerticalOrigin

                // 获取或设置此广告牌的高度参考    type: HeightReference    default:HeightReference.NONE
                // NONE 位置绝对；CLAMP_TO_GROUND 位置固定在地形上；RELATIVE_TO_GROUND 位置高度是指地形上方的高度
                heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,

                // 颜色  type: Color  default:Color.WHITE
                color: Cesium.Color.LIME,
                // 获取或设置以弧度为单位的旋转角度  type: number  default:0
                rotation: Cesium.Math.PI_OVER_FOUR,
                // 获取或设置世界空间中的对齐轴  type:Cartesian3  default:Cartesian3.ZERO
                alignedAxis: Cesium.Cartesian3.ZERO,
                width: 100, // default: undefined
                height: 25, // default: undefined

                // 根据广告牌与相机的距离获取或设置广告牌的近和远缩放属性  type:NearFarScalar
                scaleByDistance: new Cesium.NearFarScalar(1.0e3, 2.0, 2.0e3, 1.0),
                // 根据广告牌到相机的距离，获取或设置广告牌的近和远半透明属性  type:NearFarScalar
                translucencyByDistance: new Cesium.NearFarScalar(1.0e3, 1.0, 1.5e6, 0.5),
                // 根据广告牌与摄像头的距离，获取或设置广告牌的近像素偏移量和远像素偏移量缩放属性  type:NearFarScalar
                pixelOffsetScaleByDistance: new Cesium.NearFarScalar(1.0e3, 1.0, 1.5e6, 0.0),

                // 设置1000米和2000米之间可见  type:DistanceDisplayCondition
                // distanceDisplayCondition: new Cesium.DistanceDisplayCondition(1.0e3, 2.0e3),
                // 获取或设置与相机的距离，在深度处禁用深度测试，例如，以防止剪切地形。
                // 设置为零时，将始终应用深度测试。设置为Number.POSITIVE_INFINITY时，永远不会应用深度测试。
                disableDepthTestDistance: Number.POSITIVE_INFINITY, // 可以实现图片不会被遮挡的效果
            }
        });

        //加载北京五角星标记
        const entity2 = viewer.entities.add({
            position: Cesium.Cartesian3.fromDegrees(116.3912999103631, 39.90743277177759, 20000),
            billboard: new Cesium.BillboardGraphics({
                image: "./res/img/sd.png",
                width: 52,
                height: 52,
                // heightReference: Cesium.HeightReference.CLAMP_TO_GROUND
                disableDepthTestDistance: Number.POSITIVE_INFINITY
            }),
            // polygon: {
            //     hierarchy: polygonHierarchy,
            //     material: Cesium.Color.RED.withAlpha(0.9),
            //     classificationType: Cesium.ClassificationType.CESIUM_3D_TILE, // 贴3D_TILE模型
            // },
            // clampToS3M: true, // 贴S3M模型
            classificationType: Cesium.ClassificationType.S3M_TILE // Cesium.ClassificationType.TERRAIN
        });
        // console.log("entity", entity);
    </script>
</body>

</html>