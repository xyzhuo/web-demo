define(["require","./createTaskProcessorWorker","./Check-7b2a090c","./FeatureDetection-c3b71206","./when-b60132fc","./PrimitiveType-a54dc62f","./Cartesian2-47311507","./Cartographic-3309dd0d","./Cartesian4-3ca25aab","./Color-5008547b","./ComponentDatatype-c140a87d","./getStringFromTypedArray-c37342c0","./buildModuleUrl-4e1b81e7","./S3MCompressType-555475e4","./IndexDatatype-8a5eead4","./RuntimeError-4a5c8994","./BoundingRectangle-3ed8ca6d","./pako_inflate-f73548c4","./arrayFill-4513d7ad","./CompressedTextureBuffer-290a1ff4","./PixelFormat-fd637eac","./Math-119be1a3","./WebGLConstants-4ae0db90","./Event-16a2dfbf"],(function(t,e,r,a,n,A,o,B,i,E,C,s,y,l,d,P,f,u,c,p,T,L,D,g){"use strict";function F(t,e,r){if("function"==typeof t.slice)return t.slice(e,r);for(var n=Array.prototype.slice.call(t,e,r),A=a.FeatureDetection.typedArrayTypes,o=A.length,B=0;B<o;++B)if(t instanceof A[B]){n=new A[B](n);break}return n}function M(){}var I;function m(t,e,r){var a,A=t.num_points(),o=r.num_components(),B=new I.AttributeQuantizationTransform;if(B.InitFromAttribute(r)){for(var i=new Array(o),E=0;E<o;++E)i[E]=B.min_value(E);a={quantizationBits:B.quantization_bits(),minValues:i,range:B.range(),octEncoded:!1}}I.destroy(B),(B=new I.AttributeOctahedronTransform).InitFromAttribute(r)&&(a={quantizationBits:B.quantization_bits(),octEncoded:!0}),I.destroy(B);var s,y=A*o;s=n.defined(a)?function(t,e,r,a,n){var A,o;a.quantizationBits<=8?(o=new I.DracoUInt8Array,A=new Uint8Array(n),e.GetAttributeUInt8ForAllPoints(t,r,o)):(o=new I.DracoUInt16Array,A=new Uint16Array(n),e.GetAttributeUInt16ForAllPoints(t,r,o));for(var B=0;B<n;++B)A[B]=o.GetValue(B);return I.destroy(o),A}(t,e,r,a,y):function(t,e,r,a){var n,A;switch(r.data_type()){case 1:case 11:A=new I.DracoInt8Array,n=new Int8Array(a),e.GetAttributeInt8ForAllPoints(t,r,A);break;case 2:A=new I.DracoUInt8Array,n=new Uint8Array(a),e.GetAttributeUInt8ForAllPoints(t,r,A);break;case 3:A=new I.DracoInt16Array,n=new Int16Array(a),e.GetAttributeInt16ForAllPoints(t,r,A);break;case 4:A=new I.DracoUInt16Array,n=new Uint16Array(a),e.GetAttributeUInt16ForAllPoints(t,r,A);break;case 5:case 7:A=new I.DracoInt32Array,n=new Int32Array(a),e.GetAttributeInt32ForAllPoints(t,r,A);break;case 6:case 8:A=new I.DracoUInt32Array,n=new Uint32Array(a),e.GetAttributeUInt32ForAllPoints(t,r,A);break;case 9:case 10:A=new I.DracoFloat32Array,n=new Float32Array(a),e.GetAttributeFloatForAllPoints(t,r,A)}for(var o=0;o<a;++o)n[o]=A.GetValue(o);return I.destroy(A),n}(t,e,r,y);var l=C.ComponentDatatype.fromTypedArray(s);return{array:s,data:{componentsPerAttribute:o,componentDatatype:l,byteOffset:r.byte_offset(),byteStride:C.ComponentDatatype.getSizeInBytes(l)*o,normalized:r.normalized(),quantization:a}}}var v=new B.Cartesian3(40680631590769,40680631590769,40408299984661.445),_=new B.Cartesian3,S=new B.Cartesian3;function O(t,e,r,a){var A=Math.cos(e);_.x=A*Math.cos(t),_.y=A*Math.sin(t),_.z=Math.sin(e),_=B.Cartesian3.normalize(_,_),B.Cartesian3.multiplyComponents(v,_,S);var o=Math.sqrt(B.Cartesian3.dot(_,S));return S=B.Cartesian3.divideByScalar(S,o,S),_=B.Cartesian3.multiplyByScalar(_,r,_),n.defined(a)||(a=new B.Cartesian3),B.Cartesian3.add(S,_,a)}var N=new A.Matrix4,h=new A.Matrix4,R=new B.Cartesian3,G=new B.Cartographic;function x(t,e,r,a,E,s,y,d){var P=void 0,f=void 0,u=void 0,c=void 0,p=r.vertexAttributes,T=r.attrLocation;if(r.nCompressOptions=0,n.defined(a.posUniqueID)&&a.posUniqueID>=0){n.defined(d)||(r.nCompressOptions|=l.VertexCompressOption.SVC_Vertex);var L=e.GetAttribute(t,a.posUniqueID),D=m(t,e,L),g=D.data.componentsPerAttribute;r.verticesCount=D.array.length/g,r.vertCompressConstant=D.data.quantization.range/(1<<D.data.quantization.quantizationBits);var F=D.data.quantization.minValues;r.minVerticesValue=new i.Cartesian4(F[0],F[1],F[2],1),g>3&&(r.minVerticesValue.w=F[3]);var M=r.verticesCount;if(s&&(P=new B.Cartographic,f=new B.Cartographic,u=new Float32Array(2*M),c=new Float64Array(2*M)),n.defined(d)){var I=D.array,v=3===g?B.Cartesian3.unpackArray(I):i.Cartesian4.unpackArray(I);for(let t=0,e=v.length;t<e;t++){let e=v[t];B.Cartesian3.multiplyByScalar(e,r.vertCompressConstant,e),B.Cartesian3.add(e,r.minVerticesValue,e)}var _=A.Matrix4.multiply(d.sphereMatrix,d.geoMatrix,N),S=A.Matrix4.multiply(d.ellipsoidMatrix,d.geoMatrix,h);A.Matrix4.inverse(S,S);var x=new o.Ellipsoid(6378137,6378137,6378137);for(let t=0,e=v.length;t<e;t++){let e=v[t];A.Matrix4.multiplyByPoint(_,e,R);let r=x.cartesianToCartographic(R,G);s&&(c[2*t]=r.longitude,c[2*t+1]=r.latitude,0===t?(P.longitude=r.longitude,P.latitude=r.latitude,f.longitude=r.longitude,f.latitude=r.latitude):(P.longitude=Math.max(r.longitude,P.longitude),P.latitude=Math.max(r.latitude,P.latitude),f.longitude=Math.min(r.longitude,f.longitude),f.latitude=Math.min(r.latitude,f.latitude)));let a=O(r.longitude,r.latitude,r.height,R);A.Matrix4.multiplyByPoint(S,a,e)}var b=new Array(3*v.length);3===g?B.Cartesian3.packArray(v,b):i.Cartesian4.packArray(v,b),D.array=new Float32Array(b),D.data.componentDatatype=C.ComponentDatatype.FLOAT,D.data.byteStride=4*g}if(T.aPosition=p.length,p.push({index:T.aPosition,typedArray:D.array,componentsPerAttribute:g,componentDatatype:D.data.componentDatatype,offsetInBytes:D.data.byteOffset,strideInBytes:D.data.byteStride,normalize:D.data.normalized}),!n.defined(d)&&s)for(var U=new B.Cartesian3,K=new B.Cartesian3,H=new B.Cartographic,V=0;V<M;V++)A.Matrix4.multiplyByPoint(E,B.Cartesian3.fromElements(D.array[3*V]*r.vertCompressConstant+F[0],D.array[3*V+1]*r.vertCompressConstant+F[1],D.array[3*V+2]*r.vertCompressConstant+F[2],U),K),H=B.Cartographic.fromCartesian(K),c[2*V]=H.longitude,c[2*V+1]=H.latitude,0===V?(P.longitude=H.longitude,P.latitude=H.latitude,f.longitude=H.longitude,f.latitude=H.latitude):(P.longitude=Math.max(H.longitude,P.longitude),P.latitude=Math.max(H.latitude,P.latitude),f.longitude=Math.min(H.longitude,f.longitude),f.latitude=Math.min(H.latitude,f.latitude));if(s){for(V=0;V<M;V++)u[2*V]=c[2*V]-f.longitude,u[2*V+1]=c[2*V+1]-f.latitude;T.img=p.length,p.push({index:T.img,typedArray:u,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),y.max=P,y.min=f}}if(n.defined(a.normalUniqueID)&&a.normalUniqueID>=0){r.nCompressOptions|=l.VertexCompressOption.SVC_Normal;var w=e.GetAttribute(t,a.normalUniqueID),Y=m(t,e,w),J=Y.data.quantization;r.normalRangeConstant=(1<<J.quantizationBits)-1,T.aNormal=p.length,p.push({index:T.aNormal,typedArray:Y.array,componentsPerAttribute:Y.data.componentsPerAttribute,componentDatatype:Y.data.componentDatatype,offsetInBytes:Y.data.byteOffset,strideInBytes:Y.data.byteStride,normalize:Y.data.normalized})}if(n.defined(a.colorUniqueID)&&a.colorUniqueID>=0){r.nCompressOptions|=l.VertexCompressOption.SVC_VertexColor;var k=e.GetAttribute(t,a.colorUniqueID),W=m(t,e,k);T.aColor=p.length,p.push({index:T.aColor,typedArray:W.array,componentsPerAttribute:W.data.componentsPerAttribute,componentDatatype:W.data.componentDatatype,offsetInBytes:W.data.byteOffset,strideInBytes:W.data.byteStride,normalize:W.data.normalized})}for(V=0;V<a.texCoordUniqueIDs.length;V++){r.texCoordCompressConstant=[],r.minTexCoordValue=[];var Z=a.texCoordUniqueIDs[V];if(!(Z<0)){var X=e.GetAttribute(t,Z),Q=m(t,e,X);if(n.defined(Q.data.quantization)){r.nCompressOptions|=l.VertexCompressOption.SVC_TexutreCoord,r.texCoordCompressConstant.push(Q.data.quantization.range/(1<<Q.data.quantization.quantizationBits));F=Q.data.quantization.minValues;r.minTexCoordValue.push(new o.Cartesian2(F[0],F[1]))}var z="aTexCoord"+V;T[z]=p.length,p.push({index:T[z],typedArray:Q.array,componentsPerAttribute:Q.data.componentsPerAttribute,componentDatatype:Q.data.componentDatatype,offsetInBytes:Q.data.byteOffset,strideInBytes:Q.data.byteStride,normalize:Q.data.normalized}),r.textureCoordIsW=!0}}for(V=0;V<a.vertexAttrUniqueIDs.length;V++){var j=a.vertexAttrUniqueIDs[V];if(!(j<0)){var q=e.GetAttribute(t,j),$=m(t,e,q);T.aVertexWeight=p.length,p.push({index:T.aVertexWeight,typedArray:$.array,componentsPerAttribute:$.data.componentsPerAttribute,componentDatatype:$.data.componentDatatype,offsetInBytes:$.data.byteOffset,strideInBytes:$.data.byteStride,normalize:$.data.normalized}),r.customVertexAttribute={VertexWeight:0}}}}M.dracoDecodePointCloud=function(t,e,r,a,n){for(var A=new(I=t).Decoder,o=["POSITION","NORMAL","COLOR"],B=0;B<o.length;++B)A.SkipAttributeTransform(I[o[B]]);var i=new I.DecoderBuffer;if(i.Init(e,r),A.GetEncodedGeometryType(i)!==I.POINT_CLOUD)throw new P.RuntimeError("Draco geometry type must be POINT_CLOUD.");var E=new I.PointCloud,C=A.DecodeBufferToPointCloud(i,E);if(!C.ok()||0===E.ptr)throw new P.RuntimeError("Error decoding draco point cloud: "+C.error_msg());I.destroy(i),x(E,A,a,n),I.destroy(E),I.destroy(A)},M.dracoDecodeMesh=function(t,e,r,a,n,o,B,i,E,C){for(var s=new(I=t).Decoder,y=["POSITION","NORMAL","COLOR","TEX_COORD"],l=0;l<y.length;++l)s.SkipAttributeTransform(I[y[l]]);var f=new I.DecoderBuffer;if(f.Init(e,r),s.GetEncodedGeometryType(f)!==I.TRIANGULAR_MESH)throw new P.RuntimeError("Unsupported draco mesh geometry type.");var u=new I.Mesh;if(!s.DecodeBufferToMesh(f,u).ok()||0===u.ptr)return!1;I.destroy(f),x(u,s,a,o,B,i,E,C);var c=function(t,e){for(var r=t.num_points(),a=t.num_faces(),n=new I.DracoInt32Array,A=3*a,o=d.IndexDatatype.createTypedArray(r,A),B=0,i=0;i<a;++i)e.GetFaceFromMesh(t,i,n),o[B+0]=n.GetValue(0),o[B+1]=n.GetValue(1),o[B+2]=n.GetValue(2),B+=3;var E=d.IndexDatatype.UNSIGNED_SHORT;return o instanceof Uint32Array&&(E=d.IndexDatatype.UNSIGNED_INT),I.destroy(n),{typedArray:o,numberOfIndices:A,indexDataType:E}}(u,s);n.indicesTypedArray=c.typedArray,n.indicesCount=c.numberOfIndices,n.indexType=c.indexDataType,n.primitiveType=A.PrimitiveType.TRIANGLES,I.destroy(u),I.destroy(s)};var b=Object.freeze({OSGBFile:0,OSGBCacheFile:1,ClampGroundPolygon:2,ClampObjectPolygon:3,ClampGroundLine:4,ClampObjectLine:5,IconPoint:6,Text:7,PointCloudFile:8,ExtendRegion3D:9,ExtendClampPolygonCache:10,PolylineEffect:11,RegionEffect:12,ClampGroundAndObjectLineCache:13,ClampGroundRealtimeRasterCache:14});function U(){}function K(t){var e=new y.BoundingSphere,r=t.instanceBounds;if(!n.defined(r))return e;var a=new B.Cartesian3(r[0],r[1],r[2]),A=new B.Cartesian3(r[3],r[4],r[5]),o=B.Cartesian3.lerp(a,A,.5,new B.Cartesian3),i=B.Cartesian3.distance(o,a);return e.center=o,e.radius=i,e}function H(t){var e,r,a=new y.BoundingSphere,A=new B.Cartesian3,o=t.vertexAttributes[0],i=o.componentsPerAttribute,E=n.defined(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,C=1;E?(C=t.vertCompressConstant,e=new B.Cartesian3(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),r=new Uint16Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/2)):r=new Float32Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/4);for(var s=[],d=0;d<t.verticesCount;d++)B.Cartesian3.fromArray(r,i*d,A),E&&(A=B.Cartesian3.multiplyByScalar(A,C,A),A=B.Cartesian3.add(A,e,A)),s.push(B.Cartesian3.clone(A));return y.BoundingSphere.fromPoints(s,a),s.length=0,a}function V(t){var e,r,a=new y.BoundingSphere,A=new B.Cartesian3,o=n.defined(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,i=t.vertexAttributes[0],E=i.componentsPerAttribute,C=1;o?(C=t.vertCompressConstant,r=new B.Cartesian3(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/2)):e=new Float32Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/4);for(var s=[],d=0;d<t.verticesCount;d++)B.Cartesian3.fromArray(e,E*d,A),o&&(A=B.Cartesian3.multiplyByScalar(A,C,A),A=B.Cartesian3.add(A,r,A)),s.push(B.Cartesian3.clone(A));return y.BoundingSphere.fromPoints(s,a),s.length=0,a}function w(t){var e,r,a=n.defined(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,A=new y.BoundingSphere,o=new B.Cartesian3,E=new B.Cartesian3,C=t.vertexAttributes[0],s=C.componentsPerAttribute,d=t.attrLocation.aPosition,P=t.vertexAttributes[d],f=t.attrLocation.aTexCoord5,u=t.vertexAttributes[f],c=u.componentsPerAttribute;a?(s=3,c=3,e=J(t,P),r=function(t,e,r){for(var a,n,A,o=e.componentsPerAttribute,B=t.texCoordCompressConstant[r],E=new i.Cartesian4(t.minTexCoordValue[r].x,t.minTexCoordValue[r].y,t.minTexCoordValue[r].z,t.minTexCoordValue[r].w),C=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),s=new Float32Array(3*t.verticesCount),y=0;y<t.verticesCount;y++)a=C[o*y]*B+E.x,n=C[o*y+1]*B+E.y,A=C[o*y+2]*B+E.z,s[3*y]=a,s[3*y+1]=n,s[3*y+2]=A;return s}(t,u,5)):(e=new Float32Array(C.typedArray.buffer,C.typedArray.byteOffset,C.typedArray.byteLength/4),r=new Float32Array(u.typedArray.buffer,u.typedArray.byteOffset,u.typedArray.byteLength/4));for(var p=[],T=0;T<t.verticesCount;T++)B.Cartesian3.fromArray(e,s*T,o),B.Cartesian3.fromArray(r,c*T,E),B.Cartesian3.add(o,E,o),p.push(B.Cartesian3.clone(o));return y.BoundingSphere.fromPoints(p,A),p.length=0,A}function Y(t){var e=A.PrimitiveType.TRIANGLES;switch(t){case 1:e=A.PrimitiveType.POINTS;break;case 2:e=A.PrimitiveType.LINES;break;case 3:e=A.PrimitiveType.LINE_STRIP;break;case 4:e=A.PrimitiveType.TRIANGLES}return e}function J(t,e){for(var r,a,n,A=e.componentsPerAttribute,o=t.vertCompressConstant,i=new B.Cartesian3(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),E=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),C=new Float32Array(3*t.verticesCount),s=0;s<t.verticesCount;s++)r=E[A*s]*o+i.x,a=E[A*s+1]*o+i.y,n=E[A*s+2]*o+i.z,C[3*s]=r,C[3*s+1]=a,C[3*s+2]=n;return C}U.calcBoundingSphereInWorker=function(t,e){return e.instanceIndex>-1?K(e):n.defined(e.clampRegionEdge)?w(e):t>=b.ClampGroundPolygon&&t<=b.ClampObjectLine?V(e):t==b.ClampGroundAndObjectLineCache?w(e):H(e)},U.calcBoundingSphere=function(t,e,r){var a,A=t._fileType;return a=e.instanceIndex>-1?K(e):n.defined(e.clampRegionEdge)?w(e):A>=b.ClampGroundPolygon&&A<=b.ClampObjectLine?V(e):A==b.ClampGroundAndObjectLineCache?w(e):H(e),y.BoundingSphere.transform(a,r,a),a},U.calcBoundingRectangle=function(t,e){var r;return t._fileType===b.ClampGroundPolygon&&(r=function(t){var e,r,a=n.defined(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,A=new f.BoundingRectangle,i=t.vertexAttributes[0],E=i.componentsPerAttribute,C=1;a?(C=t.vertCompressConstant,r=new B.Cartesian3(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/2)):e=new Float32Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/4);for(var s=[],y=0;y<t.verticesCount;y++){var d=e[E*y],P=e[E*y+1];a&&(d=C*d+r.x,P=C*P+r.y),s.push(new o.Cartesian2(d,P))}return f.BoundingRectangle.fromPoints(s,A),s.length=0,A}(e)),r},U.createEdge=function(t,e){if(!(e.length<1)){var r=function(t){for(var e=[],r=t.length,a=0;a<r;a++){var n=Y(t[a].primitiveType);n!==A.PrimitiveType.LINES&&n!==A.PrimitiveType.LINE_STRIP||e.push(t[a])}return e}(e);if(0!=r.length){var a,o=function(t){for(var e=0,r=t.length,a=0;a<r;a++){var n=t[a],o=Y(n.primitiveType);o==A.PrimitiveType.LINES?e+=n.indicesCount/2:o==A.PrimitiveType.LINE_STRIP&&e++}return e}(r),i=t.attrLocation.aPosition,E=t.vertexAttributes[i],s=n.defined(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,y=E.componentsPerAttribute;s?(y=3,a=J(t,E)):a=new Float32Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/4);for(var d=function(t){for(var e=0,r=t.length,a=0;a<r;a++)e+=t[a].indicesCount;return e}(r),P=function(t,e,r){for(var a,n=[],o=r.length,i=0;i<o;i++){var E,C=r[i];E=0===C.indexType?new Uint16Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/2):new Uint32Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/4);var s=Y(C.primitiveType);if(s==A.PrimitiveType.LINES)for(a=0;a<C.indicesCount;a+=2){var y=[],l=new B.Cartesian3;l.x=t[E[a]*e],l.y=t[E[a]*e+1],l.z=t[E[a]*e+2],y.push(l);var d=new B.Cartesian3;d.x=t[E[a+1]*e],d.y=t[E[a+1]*e+1],d.z=t[E[a+1]*e+2],y.push(d),n.push(y)}else if(s==A.PrimitiveType.LINE_STRIP){for(y=[],a=0;a<C.indicesCount;a++){var P=new B.Cartesian3;P.x=t[E[a]*e],P.y=t[E[a]*e+1],P.z=t[E[a]*e+2],y.push(P)}n.push(y)}}return n}(a,y,r),f=4*d-4*o,u=new Float32Array(3*f),c=new Float32Array(3*f),p=new Float32Array(3*f),T=new Int8Array(2*f),L=0,D=0;D<o;D++){for(var g=P[D].length,F=0;F<g;F++){var M=4*L-4*D,I=3*M+12*F,m=P[D][F];0!=F&&(u[I-6]=m.x,u[I-5]=m.y,u[I-4]=m.z,u[I-3]=m.x,u[I-2]=m.y,u[I-1]=m.z),F!=g-1&&(u[I]=m.x,u[I+1]=m.y,u[I+2]=m.z,u[I+3]=m.x,u[I+4]=m.y,u[I+5]=m.z);var v=m;F+1<g&&(v=P[D][F+1]),0!=F&&(p[I-6]=v.x,p[I-5]=v.y,p[I-4]=v.z,p[I-3]=v.x,p[I-2]=v.y,p[I-1]=v.z),F!=g-1&&(p[I]=v.x,p[I+1]=v.y,p[I+2]=v.z,p[I+3]=v.x,p[I+4]=v.y,p[I+5]=v.z);var _=m;F>=1&&(_=P[D][F-1]),0!=F&&(c[I-6]=_.x,c[I-5]=_.y,c[I-4]=_.z,c[I-3]=_.x,c[I-2]=_.y,c[I-1]=_.z),F!=g-1&&(c[I]=_.x,c[I+1]=_.y,c[I+2]=_.z,c[I+3]=_.x,c[I+4]=_.y,c[I+5]=_.z),I=2*M+8*F,0!=F&&(T[I-4]=-1,T[I-3]=-1,T[I-2]=1,T[I-1]=-1),F!=g-1&&(T[I]=-1,T[I+1]=1,T[I+2]=1,T[I+3]=1)}L+=P[D].length}var S={vertexAttributes:[],attrLocation:{}},O=S.vertexAttributes,N=S.attrLocation;S.instanceCount=0,S.instanceMode=0,N.aPosition=0,O.push({index:N.aPosition,typedArray:u,componentsPerAttribute:3,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aNormal=1,O.push({index:N.aNormal,typedArray:c,componentsPerAttribute:3,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord0=2,O.push({index:N.aTexCoord0,typedArray:p,componentsPerAttribute:3,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord1=3,O.push({index:N.aTexCoord1,typedArray:T,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:2*Int8Array.BYTES_PER_ELEMENT,normalize:!1});for(var h=[],R=0;R<P.length;R++)h.push(P[R].length);var G=function(t,e,r,a){var n,o={};o.indicesCount=6*(t-e),o.indexType=a>65535?1:0,o.primitiveType=A.PrimitiveType.TRIANGLES,n=0===o.indexType?new Uint16Array(o.indicesCount):new Uint32Array(o.indicesCount);for(var B=0,i=0;i<e;i++){for(var E=0;E<r[i]-1;E++)n[6*(B-i+E)]=4*(B-i+E),n[6*(B-i+E)+1]=4*(B-i+E)+2,n[6*(B-i+E)+2]=4*(B-i+E)+1,n[6*(B-i+E)+3]=4*(B-i+E)+1,n[6*(B-i+E)+4]=4*(B-i+E)+2,n[6*(B-i+E)+5]=4*(B-i+E)+3;B+=r[i]}return o.indicesTypedArray=n,o}(d,o,h,f);return{vertexPackage:S,indexPackage:G}}}};var k,W,Z=Object.freeze({S3M:49,S3M4:1}),X=function(){var t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var r,a="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";WebAssembly.validate(t)&&(a="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");var n=WebAssembly.instantiate(function(t){for(var r=new Uint8Array(t.length),a=0;a<t.length;++a){var n=t.charCodeAt(a);r[a]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}var A=0;for(a=0;a<t.length;++a)r[A++]=r[a]<60?e[r[a]]:64*(r[a]-60)+r[++a];return r.buffer.slice(0,A)}(a),{}).then((function(t){(r=t.instance).exports.__wasm_call_ctors()}));function A(t,e,a,n,A,o){var B=r.exports.sbrk,i=a+3&-4,E=B(i*n),C=B(A.length),s=new Uint8Array(r.exports.memory.buffer);s.set(A,C);var y=t(E,a,n,C,A.length);if(0==y&&o&&o(E,i,n),e.set(s.subarray(E,E+a*n)),B(E-B(0)),0!=y)throw new Error("Malformed buffer data: "+y)}var o={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},B={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:n,supported:!0,decodeVertexBuffer:function(t,e,a,n,B){A(r.exports.meshopt_decodeVertexBuffer,t,e,a,n,r.exports[o[B]])},decodeIndexBuffer:function(t,e,a,n){A(r.exports.meshopt_decodeIndexBuffer,t,e,a,n)},decodeIndexSequence:function(t,e,a,n){A(r.exports.meshopt_decodeIndexSequence,t,e,a,n)},decodeGltfBuffer:function(t,e,a,n,i,E){A(r.exports[B[i]],t,e,a,n,r.exports[o[E]])}}}(),Q=1,z=2,j={};j[0]=T.PixelFormat.RGB_DXT1,j[Q]=T.PixelFormat.RGBA_DXT3,j[z]=T.PixelFormat.RGBA_DXT5;var q,$=0,tt=!1;function et(t,e){var r=t.data,a=r.byteLength,A=new Uint8Array(r),o=q._malloc(a);!function(t,e,r,a){var n,A=r/4,o=a%4,B=new Uint32Array(t.buffer,0,(a-o)/4),i=new Uint32Array(e.buffer);for(n=0;n<B.length;n++)i[A+n]=B[n];for(n=a-o;n<a;n++)e[r+n]=t[n]}(A,q.HEAPU8,o,a);var B=q._crn_get_dxt_format(o,a),i=j[B];if(!n.defined(i))throw new P.RuntimeError("Unsupported compressed format.");var E,C=q._crn_get_levels(o,a),s=q._crn_get_width(o,a),y=q._crn_get_height(o,a),l=0;for(E=0;E<C;++E)l+=T.PixelFormat.compressedTextureSizeInBytes(i,s>>E,y>>E);if($<l&&(n.defined(k)&&q._free(k),k=q._malloc(l),W=new Uint8Array(q.HEAPU8.buffer,k,l),$=l),q._crn_decompress(o,a,k,l,0,C),q._free(o),n.defaultValue(t.bMipMap,!1)){var d=W.slice(0,l);return e.push(d.buffer),new p.CompressedTextureBuffer(i,s,y,d)}var f=T.PixelFormat.compressedTextureSizeInBytes(i,s,y),u=W.subarray(0,f),c=new Uint8Array(f);return c.set(u,0),e.push(c.buffer),new p.CompressedTextureBuffer(i,s,y,c)}var rt,at=1,nt=0,At=1,ot=2,Bt=3,it=0,Et=1,Ct=2;new E.Color;var st,yt=!1,lt=null;function dt(t,e,r,a,n,A){this.left=t,this.bottom=e,this.right=r,this.top=a,this.minHeight=n,this.maxHeight=A,this.width=r-t,this.length=a-e,this.height=A-n}function Pt(t,e,r){var a=r,n=t.getUint32(a,!0),A=a+=Uint32Array.BYTES_PER_ELEMENT,o=new Uint8Array(e,a,n);return{dataViewByteOffset:A,byteOffset:a+=n*Uint8Array.BYTES_PER_ELEMENT,buffer:o}}function ft(t,e,r,a){var n=t.getUint32(a+e,!0);a+=Uint32Array.BYTES_PER_ELEMENT;var A=r.subarray(a,a+n);return{string:s.getStringFromTypedArray(A),bytesOffset:a+=n}}function ut(t,e,r,a,n,A){var o=r,B=t.getUint16(r+a,!0);o+=Uint16Array.BYTES_PER_ELEMENT,A||(o+=Uint16Array.BYTES_PER_ELEMENT);for(var i=0;i<B;i++){var E=t.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var s=t.getUint16(o+a,!0);if(o+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(o+a,!0),o+=Uint16Array.BYTES_PER_ELEMENT,20==s||35==s);else{var y=E*s*Float32Array.BYTES_PER_ELEMENT,l=e.subarray(o,o+y);o+=y;var d="aTexCoord"+i,P=n.vertexAttributes,f=n.attrLocation;f[d]=P.length,P.push({index:f[d],typedArray:l,componentsPerAttribute:s,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:s*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}}return{bytesOffset:o}}function ct(t,e,r,a,n){var A=r,o=t.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var B=n.vertexAttributes,i=n.attrLocation,E=0;E<o;E++){var s=t.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var y=t.getUint16(A+a,!0);if(A+=Uint16Array.BYTES_PER_ELEMENT,16===y){A-=Uint16Array.BYTES_PER_ELEMENT;var l=s*(y*Float32Array.BYTES_PER_ELEMENT+Uint16Array.BYTES_PER_ELEMENT),d=e.subarray(A,A+l);A+=l;var P=new Uint8Array(Float32Array.BYTES_PER_ELEMENT*y*s);n.instanceCount=s,n.instanceMode=y,n.instanceBuffer=P,n.instanceIndex=1;for(var f=Float32Array.BYTES_PER_ELEMENT*y+Uint16Array.BYTES_PER_ELEMENT,u=0;u<s;u++){var c=u*f+Uint16Array.BYTES_PER_ELEMENT,p=d.subarray(c,c+f);P.set(p,u*(f-Uint16Array.BYTES_PER_ELEMENT))}T=16*Float32Array.BYTES_PER_ELEMENT,i.uv2=B.length,B.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:T,instanceDivisor:1}),i.uv3=B.length,B.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv4=B.length,B.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.secondary_colour=B.length,B.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1})}else{t.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;l=s*y*Float32Array.BYTES_PER_ELEMENT;if(17===y||29===y){var T;P=e.subarray(A,A+l);n.instanceCount=s,n.instanceMode=y,n.instanceBuffer=P,n.instanceIndex=1,17===y?(T=17*Float32Array.BYTES_PER_ELEMENT,i.uv2=B.length,B.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:T,instanceDivisor:1}),i.uv3=B.length,B.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv4=B.length,B.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.secondary_colour=B.length,B.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv6=B.length,B.push({index:i.uv6,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1})):29===y&&(T=29*Float32Array.BYTES_PER_ELEMENT,i.uv1=B.length,B.push({index:i.uv1,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:T,instanceDivisor:1,byteLength:l}),i.uv2=B.length,B.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv3=B.length,B.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv4=B.length,B.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv5=B.length,B.push({index:i.uv5,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv6=B.length,B.push({index:i.uv6,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv7=B.length,B.push({index:i.uv7,componentsPerAttribute:3,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.secondary_colour=B.length,B.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),i.uv9=B.length,B.push({index:i.uv9,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}))}else{var L=s*y;n.instanceBounds=new Float32Array(L);for(var D=0;D<L;D++)n.instanceBounds[D]=t.getFloat32(A+a+D*Float32Array.BYTES_PER_ELEMENT,!0)}A+=l}}return{bytesOffset:A}}var pt=new B.Cartesian3(40680631590769,40680631590769,40408299984661.445),Tt=new B.Cartesian3,Lt=new B.Cartesian3;function Dt(t,e,r,a){var A=Math.cos(e);Tt.x=A*Math.cos(t),Tt.y=A*Math.sin(t),Tt.z=Math.sin(e),Tt=B.Cartesian3.normalize(Tt,Tt),B.Cartesian3.multiplyComponents(pt,Tt,Lt);var o=Math.sqrt(B.Cartesian3.dot(Tt,Lt));return Lt=B.Cartesian3.divideByScalar(Lt,o,Lt),Tt=B.Cartesian3.multiplyByScalar(Tt,r,Tt),n.defined(a)||(a=new B.Cartesian3),B.Cartesian3.add(Lt,Tt,a)}var gt=new B.Cartesian3,Ft=new B.Cartographic,Mt=new A.Matrix4,It=new A.Matrix4;function mt(t,e,r,a,E,s,y,l){var d=a,P=e.getUint32(d+r,!0);if(E.verticesCount=P,d+=Uint32Array.BYTES_PER_ELEMENT,P<=0)return{bytesOffset:d};var f=e.getUint16(d+r,!0);d+=Uint16Array.BYTES_PER_ELEMENT;var u=e.getUint16(d+r,!0);u=f*Float32Array.BYTES_PER_ELEMENT,d+=Uint16Array.BYTES_PER_ELEMENT;var c=P*f*Float32Array.BYTES_PER_ELEMENT,p=t.subarray(d,d+c);d+=c;var T=E.vertexAttributes,L=E.attrLocation,D=void 0,g=void 0;if(y){D=new B.Cartographic,g=new B.Cartographic;var F=new Float32Array(2*P),M=new Float64Array(2*P);if(n.defined(l)){var I=new Float32Array(p.byteLength/4),m=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4);J=3===f?B.Cartesian3.unpackArray(m):i.Cartesian4.unpackArray(m);var v=A.Matrix4.multiply(l.sphereMatrix,l.geoMatrix,Mt),_=A.Matrix4.multiply(l.ellipsoidMatrix,l.geoMatrix,It);A.Matrix4.inverse(_,_);for(var S=new o.Ellipsoid(6378137,6378137,6378137),O=0,N=0,h=J.length;N<h;N++){var R=J[N];A.Matrix4.multiplyByPoint(v,R,gt);var G=Dt((k=S.cartesianToCartographic(gt,Ft)).longitude,k.latitude,k.height,gt);A.Matrix4.multiplyByPoint(_,G,R),3===f?(B.Cartesian3.pack(R,I,O),O+=3):(i.Cartesian4.pack(R,I,O),O+=4),M[2*N]=k.longitude,M[2*N+1]=k.latitude,0===N?(D.longitude=k.longitude,D.latitude=k.latitude,g.longitude=k.longitude,g.latitude=k.latitude):(D.longitude=Math.max(k.longitude,D.longitude),D.latitude=Math.max(k.latitude,D.latitude),g.longitude=Math.min(k.longitude,g.longitude),g.latitude=Math.min(k.latitude,g.latitude))}p=I}else for(var x=new B.Cartesian3,b=new B.Cartesian3,U=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4),K=new B.Cartographic,H=0;H<P;H++)A.Matrix4.multiplyByPoint(s,B.Cartesian3.fromElements(U[3*H],U[3*H+1],U[3*H+2],x),b),K=B.Cartographic.fromCartesian(b),M[2*H]=K.longitude,M[2*H+1]=K.latitude,0===H?(D.longitude=K.longitude,D.latitude=K.latitude,g.longitude=K.longitude,g.latitude=K.latitude):(D.longitude=Math.max(K.longitude,D.longitude),D.latitude=Math.max(K.latitude,D.latitude),g.longitude=Math.min(K.longitude,g.longitude),g.latitude=Math.min(K.latitude,g.latitude));for(H=0;H<P;H++)F[2*H]=M[2*H]-g.longitude,F[2*H+1]=M[2*H+1]-g.latitude;L.aPosition=T.length,T.push({index:L.aPosition,typedArray:p,componentsPerAttribute:f,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:u,normalize:!1}),L.img=T.length,T.push({index:L.img,typedArray:F,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}else{if(3===f&&n.defined(s)){b=new B.Cartesian3,U=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4);for(var V=new Float32Array(p.byteLength/4+P),w=U.length,Y=(H=0,0);H<w;H+=3,Y+=4)V[Y]=U[H],V[Y+1]=U[H+1],V[Y+2]=U[H+2],A.Matrix4.multiplyByPoint(s,B.Cartesian3.fromElements(V[Y],V[Y+1],V[Y+2],x),b),V[Y+3]=B.Cartographic.fromCartesian(b).height;p=V,u=(f=4)*Float32Array.BYTES_PER_ELEMENT}if(n.defined(l)){var J;I=new Float32Array(p.byteLength/4),m=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4);J=3===f?B.Cartesian3.unpackArray(m):i.Cartesian4.unpackArray(m);v=A.Matrix4.multiply(l.sphereMatrix,l.geoMatrix,Mt),_=A.Matrix4.multiply(l.ellipsoidMatrix,l.geoMatrix,It);A.Matrix4.inverse(_,_);for(S=new o.Ellipsoid(6378137,6378137,6378137),O=0,N=0,h=J.length;N<h;N++){R=J[N];A.Matrix4.multiplyByPoint(v,R,gt);var k;G=Dt((k=S.cartesianToCartographic(gt,Ft)).longitude,k.latitude,k.height,gt);A.Matrix4.multiplyByPoint(_,G,R),3===f?(B.Cartesian3.pack(R,I,O),O+=3):(i.Cartesian4.pack(R,I,O),O+=4)}p=I}L.aPosition=T.length,T.push({index:L.aPosition,typedArray:p,componentsPerAttribute:f,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:u,normalize:!1})}return{bytesOffset:d,cartographicBounds:{max:D,min:g}}}function vt(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:A};var B=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var i=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var E=o*B*Float32Array.BYTES_PER_ELEMENT,s=t.subarray(A,A+E);if(A+=E,!n.ignoreNormal){var y=n.vertexAttributes,l=n.attrLocation;l.aNormal=y.length,y.push({index:l.aNormal,typedArray:s,componentsPerAttribute:B,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:i,normalize:!1})}return{bytesOffset:A}}var _t={0:Uint32Array.BYTES_PER_ELEMENT,1:Float32Array.BYTES_PER_ELEMENT,2:Float64Array.BYTES_PER_ELEMENT};function St(t,e,r,a,n){var A,o=a,B=e.getUint32(o+r,!0);if(o+=Uint32Array.BYTES_PER_ELEMENT,n.verticesCount,B>0){e.getUint16(o+r,!0),o+=Uint16Array.BYTES_PER_ELEMENT,o+=2*Uint8Array.BYTES_PER_ELEMENT;var i=B*Uint8Array.BYTES_PER_ELEMENT*4;A=F(t,o,o+i),o+=i;var E=n.vertexAttributes,s=n.attrLocation;s.aColor=E.length,E.push({index:s.aColor,typedArray:A,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!0})}return{bytesOffset:o}}function Ot(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);return A+=Uint32Array.BYTES_PER_ELEMENT,o<=0?{bytesOffset:A}:(e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,A+=2*Uint8Array.BYTES_PER_ELEMENT,{bytesOffset:A+=o*Uint8Array.BYTES_PER_ELEMENT*4})}function Nt(t,e,r,a,n){var A=n,o=[],B=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var i=0;i<B;i++){var E={};3===t&&(r.getUint32(A+a,!0),A+=Uint32Array.BYTES_PER_ELEMENT);var C=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var s=r.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,r.getUint8(A+a,!0),A+=Uint8Array.BYTES_PER_ELEMENT;var y=r.getUint8(A+a,!0);if(A+=Uint8Array.BYTES_PER_ELEMENT,A+=Uint8Array.BYTES_PER_ELEMENT,C>0){var l=0,d=null;1===s||3===s?(l=C*Uint32Array.BYTES_PER_ELEMENT,d=e.subarray(A,A+l)):(l=C*Uint16Array.BYTES_PER_ELEMENT,d=e.subarray(A,A+l),C%2!=0&&(l+=2)),E.indicesTypedArray=d,A+=l}E.indicesCount=C,E.indexType=s,E.primitiveType=y;var P=[],f=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var u=0;u<f;u++){var c=ft(r,a,e,A),p=c.string;A=c.bytesOffset,P.push(p),E.materialCode=p}if(0===f&&(E.materialCode="OSGBEmpty"),o.push(E),0!==A%4)A+=4-A%4}return{bytesOffset:A,arrIndexPackage:o}}function ht(t,e,r,a,E,s,y,d,P){var f,u=a,c=e.getUint32(u+r,!0);return E.nCompressOptions=c,u+=Uint32Array.BYTES_PER_ELEMENT,(c&l.VertexCompressOption.SVC_Vertex)==l.VertexCompressOption.SVC_Vertex?(f=function(t,e,r,a,E,s){var y=a,l=e.getUint32(y+r,!0);if(E.verticesCount=l,y+=Uint32Array.BYTES_PER_ELEMENT,l<=0)return{bytesOffset:y};var d=e.getUint16(y+r,!0);y+=Uint16Array.BYTES_PER_ELEMENT;var P=e.getUint16(y+r,!0);P=d*Int16Array.BYTES_PER_ELEMENT,y+=Uint16Array.BYTES_PER_ELEMENT;var f=e.getFloat32(y+r,!0);y+=Float32Array.BYTES_PER_ELEMENT;var u=new i.Cartesian4;u.x=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,u.y=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,u.z=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,u.w=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,E.vertCompressConstant=f,E.minVerticesValue=u;var c=l*d*Int16Array.BYTES_PER_ELEMENT,p=t.subarray(y,y+c);if(y+=c,n.defined(s)){var T=new Float32Array(p.byteLength/4),L=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4),D=B.Cartesian3.unpackArray(L);for(let t=0,e=D.length;t<e;t++){let e=D[t];B.Cartesian3.multiplyByScalar(e,f,e),B.Cartesian3.add(e,u,e)}var g=A.Matrix4.multiply(s.sphereMatrix,s.geoMatrix,Mt),F=A.Matrix4.multiply(s.ellipsoidMatrix,s.geoMatrix,It);A.Matrix4.inverse(F,F);var M=new o.Ellipsoid(6378137,6378137,6378137),I=0;for(let t=0,e=D.length;t<e;t++){let e=D[t];A.Matrix4.multiplyByPoint(g,e,gt);let r=M.cartesianToCartographic(gt,Ft),a=Dt(r.longitude,r.latitude,r.height,gt);A.Matrix4.multiplyByPoint(F,a,e),B.Cartesian3.pack(e,T,I),I+=3}p=T}var m=E.vertexAttributes,v=E.attrLocation;return v.aPosition=m.length,m.push({index:v.aPosition,typedArray:p,componentsPerAttribute:d,componentDatatype:C.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:P,normalize:!1}),{bytesOffset:y}}(t,e,r,u,E,P),u=f.bytesOffset):u=(f=mt(t,e,r,u,E,y,d,P)).bytesOffset,(c&l.VertexCompressOption.SVC_Normal)==l.VertexCompressOption.SVC_Normal?(f=function(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:A};e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var B=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var i=2*o*Int16Array.BYTES_PER_ELEMENT,E=t.subarray(A,A+i);if(A+=i,!n.ignoreNormal){var s=n.vertexAttributes,y=n.attrLocation;y.aNormal=s.length,s.push({index:y.aNormal,typedArray:E,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:B,normalize:!1})}return{bytesOffset:A}}(t,e,r,u,E),u=f.bytesOffset):u=(f=vt(t,e,r,u,E)).bytesOffset,u=(f=Ot(0,e,r,u=(f=St(t,e,r,u,E)).bytesOffset)).bytesOffset,(c&l.VertexCompressOption.SVC_TexutreCoord)==l.VertexCompressOption.SVC_TexutreCoord?(f=function(t,e,r,a,n){n.texCoordCompressConstant=[],n.minTexCoordValue=[];var A=r,o=t.getUint16(r+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var B=0,E=0;E<o;E++){var s=t.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,A+=3*Uint8Array.BYTES_PER_ELEMENT;var y=t.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var l=t.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var d=t.getFloat32(A+a,!0);A+=Float32Array.BYTES_PER_ELEMENT,n.texCoordCompressConstant.push(d);var P=new i.Cartesian4;P.x=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.y=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.z=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.w=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,n.minTexCoordValue.push(P);var f=y*l*Int16Array.BYTES_PER_ELEMENT,u=e.subarray(A,A+f),c=(A+=f)%4;0!==c&&(A+=4-c);var p="aTexCoord"+B,T=n.vertexAttributes,L=n.attrLocation;if(L[p]=T.length,T.push({index:L[p],typedArray:u,componentsPerAttribute:l,componentDatatype:C.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:l*Int16Array.BYTES_PER_ELEMENT,normalize:!1}),s){f=y*Float32Array.BYTES_PER_ELEMENT;var D=e.subarray(A,A+f);A+=f,n.texCoordZMatrix=!0,L[p="aTexCoordZ"+B]=T.length,T.push({index:L[p],typedArray:D,componentsPerAttribute:1,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:!1})}B++}return{bytesOffset:A}}(e,t,u,r,E),u=f.bytesOffset):u=(f=ut(e,t,u,r,E,s)).bytesOffset,(c&l.VertexCompressOption.SVC_TexutreCoordIsW)==l.VertexCompressOption.SVC_TexutreCoordIsW&&(E.textureCoordIsW=!0),{bytesOffset:u=(f=ct(e,t,u,r,E)).bytesOffset}}function Rt(t,e,r,a,A,o,B,i,E,s){3===t&&(r.getUint32(A,!0),A+=Uint32Array.BYTES_PER_ELEMENT,n.defined(E)&&E||(i=void 0));var y,l=A;l=(y=mt(e,r,a,l,o,i,E,s)).bytesOffset;var d=y.cartographicBounds;if(l=(y=St(e,r,a,l=(y=vt(e,r,a,l,o)).bytesOffset,o)).bytesOffset,3!==t&&(l=(y=Ot(0,r,a,l)).bytesOffset),l=(y=ct(r,e,l=(y=ut(r,e,l,a,o,B)).bytesOffset,a,o)).bytesOffset,3===t&&(y=function(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var B=0;B<o;B++){var i=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var E=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var s=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var y=i*E*_t[s],l=t.subarray(A,A+y);A+=y;var d=n.vertexAttributes,P=n.attrLocation,f="aCustom"+B;P[f]=d.length,d.push({index:P[f],typedArray:l,componentsPerAttribute:E,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1})}return{bytesOffset:A}}(e,r,a,l,o),l=y.bytesOffset),3==t){var P=ft(r,a,e,l);l=P.bytesOffset,o.customVertexAttribute=JSON.parse(P.string);var f="aCustom"+o.customVertexAttribute.TextureCoordMatrix,u="aCustom"+o.customVertexAttribute.VertexWeight,c="aCustom"+o.customVertexAttribute.VertexWeight_1;n.defined(o.attrLocation[f])&&(o.attrLocation.aTextureCoordMatrix=o.attrLocation[f],delete o.attrLocation[f]),n.defined(o.attrLocation[u])&&(o.attrLocation.aVertexWeight=o.attrLocation[u],delete o.attrLocation[u]),n.defined(o.attrLocation[c])&&(o.attrLocation.aVertexWeight_1=o.attrLocation[c],delete o.attrLocation[c]);for(var p=Object.keys(o.attrLocation),T=p.length,L=0;L<T;++L){var D=p[L];-1!==D.indexOf("aCustom")&&delete o.attrLocation[D]}var g=(l+a)%4;g&&(g=4-g),l+=g}return 3===t&&(y=function(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:A};var B=e.getUint16(A+r,!0);return A+=Uint16Array.BYTES_PER_ELEMENT,e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,{bytesOffset:A+=o*B*Float32Array.BYTES_PER_ELEMENT}}(0,r,a,l),l=y.bytesOffset),{bytesOffset:l,cartographicBounds:d}}function Gt(t){return 0!==t.length&&"ClampGroundAndObjectLinePass"===t[0].materialCode}var xt=1,bt=4,Ut=16,Kt=32,Ht=64,Vt=128,wt=512,Yt=1024;function Jt(t,e,r,a,E,s,y,d,P,f,u,c,p){var T=t,L=0,D=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,f=n.defaultValue(f,n.defaultValue.EMPTY_OBJECT);for(var g=void 0,I=0;I<D;I++){3===d&&(e.getUint32(L+r,!0),L+=Uint32Array.BYTES_PER_ELEMENT);var m=(kt=ft(e,r,T,L)).string;if(n.defined(P)){var v=n.defaultValue(f[m],A.Matrix4.IDENTITY);g=new A.Matrix4,A.Matrix4.multiply(P,v,g)}n.defined(p)&&(p.geoMatrix=n.defaultValue(f[m],A.Matrix4.IDENTITY));var _=(L=kt.bytesOffset)%4;0!==_&&(L+=4-_);var S=nt;if(S=e.getUint32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,(Pe={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1}).ignoreNormal=a.ignoreNormal,3===d)switch(S){case it:S=At;break;case Et:S=Bt;break;case Ct:S=ot}if(S===Bt){3===d&&(e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT),d>=2&&(e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT);var O,N={};N.posUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,N.normalUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,N.colorUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,N.secondColorUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,3===d?(O=e.getUint32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT):(O=e.getUint16(L+r,!0),L+=Int16Array.BYTES_PER_ELEMENT);for(var h=[],R=0;R<O;R++){var G=e.getInt32(L+r,!0);h.push(G),L+=Int32Array.BYTES_PER_ELEMENT}N.texCoordUniqueIDs=h;var x=[];if(3===d){var b=e.getUint32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var U=0;U<b;U++){var K=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,x.push(K)}}N.vertexAttrUniqueIDs=x;var H=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var V=[],w={};if(H>0){var Y=(J=ft(e,r,T,L)).string;L=J.bytesOffset,w.materialCode=Y,V.push(w)}3===d&&((zt=(L+r)%4)&&(zt=4-zt),L+=zt);var J,k=new Object,W=e.getUint32(L+r,!0),Z=F(T,L+=Int32Array.BYTES_PER_ELEMENT,L+W);if(H>0?M.dracoDecodeMesh(rt,Z,W,Pe,w,N,g,u,k,p):M.dracoDecodePointCloud(rt,Z,W,Pe,N),n.defined(k.min)&&n.defined(k.max)||(k=void 0),L+=W,3===d)(zt=(L+r)%4)&&(zt=4-zt),(zt=((L=(J=ft(e,r,T,L+=zt)).bytesOffset)+r)%4)&&(zt=4-zt),L+=zt;a[m]={vertexPackage:Pe,arrIndexPackage:V,cartographicBounds:k}}else if(S==ot&&3==d){var Q=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT;var z=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,Pe.minVerticesValue=new i.Cartesian4,Pe.minTexCoordValue=[new o.Cartesian2,new o.Cartesian2],Pe.texCoordCompressConstant=[new B.Cartesian3,new B.Cartesian3];V=[];for(var j=0;j<z;j++){var q=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,Pe.vertCompressConstant=e.getFloat32(L+r,!0),L+=Float32Array.BYTES_PER_ELEMENT,Pe.minVerticesValue.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Pe.minVerticesValue.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Pe.minVerticesValue.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var $=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var tt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var et=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var at=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var st=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var yt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var lt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var dt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT,Pe.minTexCoordValue[0].x=et,Pe.minTexCoordValue[0].y=at,Pe.minTexCoordValue[1].x=lt,Pe.minTexCoordValue[1].y=dt,Pe.texCoordCompressConstant[0].x=$,Pe.texCoordCompressConstant[0].y=tt,Pe.texCoordCompressConstant[1].x=st,Pe.texCoordCompressConstant[1].y=yt;var Pt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var ut=0;ut<Pt;ut++){var ct=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var pt=ct,Tt=0;pt!=wt&&pt!=Yt||(Tt=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT);var Lt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var Dt=new Uint8Array(e.buffer,L+r,Lt);(zt=((L+=Uint8Array.BYTES_PER_ELEMENT*Lt)+r)%4)&&(zt=4-zt),L+=zt,Wt(q,pt,Tt,Dt,Pe,Q,p)}L=(Qt=ft(e,r,T,L)).bytesOffset,Pe.customVertexAttribute=JSON.parse(Qt.string);var gt="aCustom"+Pe.customVertexAttribute.TextureCoordMatrix,Ft="aCustom"+Pe.customVertexAttribute.VertexWeight,Mt="aCustom"+Pe.customVertexAttribute.VertexWeight_1;n.defined(Pe.attrLocation[gt])&&(Pe.attrLocation.aTextureCoordMatrix=Pe.attrLocation[gt],j===z-1&&delete Pe.attrLocation[gt]),n.defined(Pe.attrLocation[Ft])&&(Pe.attrLocation.aVertexWeight=Pe.attrLocation[Ft],j===z-1&&delete Pe.attrLocation[Ft]),n.defined(Pe.attrLocation[Mt])&&(Pe.attrLocation.aVertexWeight_1=Pe.attrLocation[Mt],j===z-1&&delete Pe.attrLocation[Mt]);for(var It=(jt=Object.keys(Pe.attrLocation)).length,mt=0;mt<It;++mt){-1!==(qt=jt[mt]).indexOf("aCustom")&&delete Pe.attrLocation[qt]}(zt=(L+r)%4)&&(zt=4-zt),L+=zt;var vt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var _t=0;_t<vt;_t++){w={};var St=e.getInt32(L+r,!0);if(L+=Int32Array.BYTES_PER_ELEMENT,St>0){var Ot=e.getInt8(L+r,!0);L+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(L+r,!0),L+=Int8Array.BYTES_PER_ELEMENT;var xt=e.getInt8(L+r,!0);L+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(L+r,!0),L+=Int8Array.BYTES_PER_ELEMENT;var bt,Ut,Kt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,13!==xt?(bt=new Uint8Array(e.buffer,L+r,Kt),L+=Uint8Array.BYTES_PER_ELEMENT*Kt):(bt=new Uint32Array(e.buffer,L+r,Kt),L+=Uint32Array.BYTES_PER_ELEMENT*Kt),(zt=(L+r)%4)&&(zt=4-zt),L+=zt,13!==xt?(Ut=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,St*Uint32Array.BYTES_PER_ELEMENT),X.decodeIndexBuffer(Ut,St,Uint32Array.BYTES_PER_ELEMENT,bt)):Ut=bt;var Ht,Vt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,w.indexType=Ot,0===Ot?Ht=new Uint16Array(St):1===Ot&&(Ht=new Uint32Array(St)),w.indicesCount=St;var Jt=new Uint32Array(Ut.buffer,Ut.byteOffset,Ut.byteLength/4);Ht.set(Jt,0),w.indicesTypedArray=Ht,w.primitiveType=xt;for(ut=0;ut<Vt;ut++){var kt;Y=(kt=ft(e,r,T,L)).string;L=kt.bytesOffset,w.materialCode=Y}if(V.length>0&&13!==xt){var Zt=Pe.preVertexCount;w.indicesTypedArray=Jt.map((function(t){return t+Zt})),w.indexType=1}V.push(w),(zt=(L+r)%4)&&(zt=4-zt),L+=zt}}}Pe.nCompressOptions=Q,2===V.length&&13===V[1].primitiveType&&V[1].indicesCount>=3&&(Xt=l.S3MEdgeProcessor.createEdgeDataByIndices(Pe,V[1],s)),a[m]={vertexPackage:Pe,arrIndexPackage:V,edgeGeometry:Xt}}else{var Xt;if(S===At||S===nt)L=(kt=Rt(d,T,e,r,L,Pe,E,g,u,p)).bytesOffset,k=kt.cartographicBounds;else if(S===ot&&(L=(kt=ht(T,e,r,L,Pe,E,g,u,p)).bytesOffset,3==d)){var Qt;L=(Qt=ft(e,r,T,L)).bytesOffset,Pe.customVertexAttribute=JSON.parse(Qt.string);var zt;gt="aCustom"+Pe.customVertexAttribute.TextureCoordMatrix,Ft="aCustom"+Pe.customVertexAttribute.VertexWeight,Mt="aCustom"+Pe.customVertexAttribute.VertexWeight_1;n.defined(Pe.attrLocation[gt])&&(Pe.attrLocation.aTextureCoordMatrix=Pe.attrLocation[gt],delete Pe.attrLocation[gt]),n.defined(Pe.attrLocation[Ft])&&(Pe.attrLocation.aVertexWeight=Pe.attrLocation[Ft],delete Pe.attrLocation[Ft]),n.defined(Pe.attrLocation[Mt])&&(Pe.attrLocation.aVertexWeight_1=Pe.attrLocation[Mt],delete Pe.attrLocation[Mt]);var jt;for(It=(jt=Object.keys(Pe.attrLocation)).length,mt=0;mt<It;++mt){var qt;-1!==(qt=jt[mt]).indexOf("aCustom")&&delete Pe.attrLocation[qt]}(zt=(L+r)%4)&&(zt=4-zt),L+=zt}Gt(V=(kt=Nt(d,T,e,r,L)).arrIndexPackage)&&(Pe.clampRegionEdge=!0),2===V.length&&13===V[1].primitiveType&&V[1].indicesCount>=3&&(Xt=l.S3MEdgeProcessor.createEdgeDataByIndices(Pe,V[1],s)),L=kt.bytesOffset,a[m]={vertexPackage:Pe,arrIndexPackage:V,edgeGeometry:Xt,cartographicBounds:k}}if(3!==d&&n.defined(y)&&y){var $t=e.getUint16(L+r,!0);if(L+=Uint16Array.BYTES_PER_ELEMENT,1===$t){var te=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT;var ee,re=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,e.getFloat32(L+r,!0),L+=Float32Array.BYTES_PER_ELEMENT;var ae=new Array(te),ne=new Array(te),Ae=new Array(te),oe=new Array(te);for(ee=0;ee<te;ee++){var Be=e.getFloat32(L+r,!0);L+=Float32Array.BYTES_PER_ELEMENT,ae[ee]=Be;var ie=e.getUint16(L+r,!0);L+=Uint16Array.BYTES_PER_ELEMENT,ne[ee]=ie;var Ee=e.getUint16(L+r,!0);L+=Uint16Array.BYTES_PER_ELEMENT,Ae[ee]=Ee;for(var Ce=Ee*re,se=new Array(Ce),ye=0;ye<Ce;ye++){gt=e.getFloat32(L+r,!0);L+=Float32Array.BYTES_PER_ELEMENT,se[ye]=gt}oe[ee]=se}}var le=new B.Cartesian3,de=new B.Cartesian3;le.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,le.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,le.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,de.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,de.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,de.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,a[m].min=le,a[m].max=de;var Pe=a[m].vertexPackage;n.defined(Pe.instanceBuffer)&&2===d&&(Pe.instanceBounds=new Float32Array(6),B.Cartesian3.pack(le,Pe.instanceBounds,0),B.Cartesian3.pack(de,Pe.instanceBounds,3))}if(3===d){var fe=new B.Cartesian3;fe.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,fe.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,fe.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var ue=new B.Cartesian3;ue.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ue.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ue.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var ce=new B.Cartesian3;ce.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ce.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ce.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var pe=new B.Cartesian3;pe.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,pe.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,pe.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT}}}function kt(t,e,r){var a=t.typedArray,n=new r(a.length+e.length);n.set(a,0),n.set(e,a.length),t.typedArray=n}function Wt(t,e,r,a,i,E,s){var y,l=0,d=i.vertexAttributes,P=i.attrLocation;switch(e){case bt:case Ut:case Kt:l=2*Uint16Array.BYTES_PER_ELEMENT,0!=(16&E)||e!==Ut&&e!==Kt||(l=2*Float32Array.BYTES_PER_ELEMENT),y=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,t*l);break;case Ht:case Vt:l=4*Uint8Array.BYTES_PER_ELEMENT,y=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,4*t);break;case wt:case Yt:l=Float32Array.BYTES_PER_ELEMENT*r,y=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,t*r*4);break;default:l=4*Uint16Array.BYTES_PER_ELEMENT,y=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,t*l)}switch(X.decodeVertexBuffer(y,t,l,a,a.length),e){case xt:var f=new Uint16Array(y.buffer,0,y.length/2),u=C.ComponentDatatype.SHORT;if(n.defined(s)){var c=B.Cartesian3.unpackArray(f);for(let t=0,e=c.length;t<e;t++){let e=c[t];B.Cartesian3.multiplyByScalar(e,i.vertCompressConstant,e),B.Cartesian3.add(e,i.minVerticesValue,e)}var p=A.Matrix4.multiply(s.sphereMatrix,s.geoMatrix,Mt),T=A.Matrix4.multiply(s.ellipsoidMatrix,s.geoMatrix,It);A.Matrix4.inverse(T,T);var L=new o.Ellipsoid(6378137,6378137,6378137);for(let t=0,e=c.length;t<e;t++){let e=c[t];A.Matrix4.multiplyByPoint(p,e,gt);let r=L.cartesianToCartographic(gt,Ft),a=Dt(r.longitude,r.latitude,r.height,gt);A.Matrix4.multiplyByPoint(T,a,e)}var D=new Array(3*c.length);B.Cartesian3.packArray(c,D),f=new Float32Array(D),u=C.ComponentDatatype.FLOAT}void 0!==(g=P.aPosition)?(kt(d[g],f,Uint16Array),i.preVertexCount=i.verticesCount,i.verticesCount+=t):(P.aPosition=d.length,d.push({index:P.aPosition,typedArray:f,componentsPerAttribute:4,componentDatatype:u,offsetInBytes:0,strideInBytes:0,normalize:!1}),i.verticesCount=t);break;case bt:var g=P.aNormal,F=new Int16Array(y.buffer,0,y.length/2);void 0!==g?kt(d[g],F,Uint16Array):(P.aNormal=d.length,d.push({index:P.aNormal,typedArray:F,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Ut:var M=new Uint16Array(y.buffer,0,y.length/2),I=(g=P.aTexCoord0,u=C.ComponentDatatype.SHORT,Uint16Array);0==(16&E)&&(u=C.ComponentDatatype.FLOAT,I=Float32Array,M=new Float32Array(y.buffer,0,y.length/4)),void 0!==g?kt(d[g],M,I):(P.aTexCoord0=d.length,d.push({index:P.aTexCoord0,typedArray:M,componentsPerAttribute:2,componentDatatype:u,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Kt:M=new Uint16Array(y.buffer,0,y.length/2),g=P.aTexCoord1,u=C.ComponentDatatype.SHORT,I=Uint16Array;0==(16&E)&&(u=C.ComponentDatatype.FLOAT,I=Float32Array,M=new Float32Array(y.buffer,0,y.length/4)),void 0!==g?kt(d[g],M,I):(P.aTexCoord1=d.length,d.push({index:P.aTexCoord1,typedArray:M,componentsPerAttribute:2,componentDatatype:u,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Ht:void 0!==(g=P.aColor)?kt(d[g],y,Uint8Array):(P.aColor=d.length,d.push({index:P.aColor,typedArray:y,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:0,normalize:!0}));break;case Vt:void 0!==(g=P.aSecondColor)?kt(d[g],y,Uint8Array):(P.aSecondColor=d.length,d.push({index:P.aSecondColor,typedArray:y,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case wt:M=new Float32Array(y.buffer,0,y.length/4);void 0!==(g=P.aCustom0||P.aVertexWeight)?kt(d[g],M,Float32Array):(P.aCustom0=d.length,d.push({index:P.aCustom0,typedArray:M,componentsPerAttribute:r,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Yt:var m=new Float32Array(y.buffer,0,y.length/4);void 0!==(g=P.aCustom1||P.aTextureCoordMatrix)?kt(d[g],m,Float32Array):(P.aCustom1=d.length,d.push({index:P.aCustom1,typedArray:m,componentsPerAttribute:r,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}))}}function Zt(t,e,r,a,o){var B={},i=[],E=new A.Matrix4,C=t;o=n.defaultValue(o,{});for(var s=0;s<16;s++)E[s]=e.getFloat64(r+a,!0),r+=Float64Array.BYTES_PER_ELEMENT;B.matrix=E,B.skeletonNames=i;var y=e.getUint32(r+a,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var l=0;l<y;l++){var d=ft(e,a,C,r),P=d.string;r=d.bytesOffset,i.push(P),o[P]=E}return{byteOffset:r,geode:B}}function Xt(t){var e=t.indexOf("Geometry");if(-1===e)return t;var r=t.substring(e,t.length);return t.replace(r,"")}function Qt(t,e,r,a,i,E,C){var s={},l=r.getFloat32(a+i,!0);a+=Float32Array.BYTES_PER_ELEMENT;var d=r.getUint16(a+i,!0);a+=Uint16Array.BYTES_PER_ELEMENT,s.rangeMode=d,s.rangeList=l;var P=new B.Cartesian3;P.x=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,P.y=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,P.z=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT;var f=r.getFloat64(a+i,!0);if(a+=Float64Array.BYTES_PER_ELEMENT,n.defined(C)){var u=A.Matrix4.clone(C.sphereMatrix,Mt),c=A.Matrix4.clone(C.ellipsoidMatrix,It);A.Matrix4.inverse(c,c);var p=new o.Ellipsoid(6378137,6378137,6378137);A.Matrix4.multiplyByPoint(u,P,gt);let t=p.cartesianToCartographic(gt,Ft),e=Dt(t.longitude,t.latitude,t.height,gt);A.Matrix4.multiplyByPoint(c,e,P)}if(s.boundingSphere=new y.BoundingSphere(P,f),3===t){var T=new B.Cartesian3;T.x=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,T.y=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,T.z=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT;var L=new B.Cartesian3;L.x=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,L.y=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,L.z=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT;var D=new B.Cartesian3;D.x=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,D.y=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,D.z=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT;var g=new B.Cartesian3;g.x=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,g.y=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,g.z=r.getFloat64(a+i,!0),a+=Float64Array.BYTES_PER_ELEMENT,s._obb={xExtent:L,yExtent:D,zExtent:g,obbCenter:T}}var F=e,M=(v=ft(r,i,F,a)).string;a=v.bytesOffset,M=Xt(M=(M=M.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")).replace(/\\/gi,"/")),s.childTile=M,s.geodes=[];var I=r.getUint32(a+i,!0);a+=Uint32Array.BYTES_PER_ELEMENT;for(var m=0;m<I;m++){var v;a=(v=Zt(e,r,a,i,E)).byteOffset,s.geodes.push(v.geode)}return 3===t&&(a=(v=ft(r,i,F,a)).bytesOffset),{pageLOD:s,bytesOffset:a}}function zt(t,e,r,a,n,A){var o=0,B={},i=[],E=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var C=0;C<E;C++){var s=Qt(t,e,r,o,a,n,A);o=s.bytesOffset,i.push(s.pageLOD)}return B.pageLods=i,B}function jt(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n["aTextureBatchId"+r]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0})}function qt(t,e,r,a){for(var A=r.length,o=0;o<A;o++)for(var B=r[o],i=B.subName.split("_")[0],E=B.subVertexOffsetArr,C=0;C<E.length;C++){var s=E[C],y=s.geoName,l=s.offset,d=s.count,P=s.texUnitIndex,f=e[y].vertexPackage.verticesCount,u=a[y];n.defined(u)||(u=a[y]={});var p=u[P];n.defined(p)||(p=u[P]=new Float32Array(f),c.arrayFill(p,-1));var T=n.defined(t)?t[i]:o;c.arrayFill(p,T,l,l+d)}}function $t(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n[1===r?"instanceId":"batchId"]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,instanceDivisor:r})}function te(t,e,r,a,A){var o=0,B=t,i=e.getUint32(o+r,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var E=0;E<i;E++){var C=ft(e,r,B,o),s=C.string;o=C.bytesOffset;var y=e.getUint32(o+r,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var d={};a[s].pickInfo=d;var P=a[s].edgeGeometry;if(-1==a[s].vertexPackage.instanceIndex){for(var f=new Float32Array(a[s].vertexPackage.verticesCount),u=0;u<y;u++){var p=e.getUint32(o+r,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var T=e.getUint32(o+r,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var L=0,D=0;d[p]={batchId:u};for(var g=0;g<T;g++)D=e.getUint32(o+r,!0),o+=Uint32Array.BYTES_PER_ELEMENT,L=e.getUint32(o+r,!0),o+=Uint32Array.BYTES_PER_ELEMENT,c.arrayFill(f,u,D,D+L);d[p].vertexColorOffset=D,d[p].vertexCount=L}$t(a[s].vertexPackage,f,void 0)}else{var F=a[s].vertexPackage.instanceCount;a[s].vertexPackage.instanceBuffer,a[s].vertexPackage.instanceMode;var M=new Float32Array(F),I=0;for(u=0;u<y;u++){var m=e.getUint32(o+r,!0);o+=Uint32Array.BYTES_PER_ELEMENT;T=e.getUint32(o+r,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(g=0;g<T;g++){var v=e.getUint32(o+r,!0);if(o+=Uint32Array.BYTES_PER_ELEMENT,M[I]=I,void 0===d[m]&&(d[m]={vertexColorCount:1,instanceIds:[],vertexColorOffset:I}),d[m].instanceIds.push(v),I++,3===A){L=e.getUint32(o+r,!0);o+=Uint32Array.BYTES_PER_ELEMENT}}}$t(a[s].vertexPackage,M,1)}P=a[s].edgeGeometry;if(n.defined(P)){var _,S,O=P.regular.instancesData,N=l.S3MEdgeProcessor.RegularInstanceStride;if(n.defined(O))for(S=O.length,_=0;_<S;_+=N){var h=O[_+9];O[_+9]=f[h]}var R=P.silhouette.instancesData;if(N=l.S3MEdgeProcessor.SilhouetteInstanceStride,n.defined(R))for(S=R.length,_=0;_<S;_+=N){h=R[_+12];R[_+12]=f[h]}}}}function ee(t){return t<1e-10&&t>-1e-10}function re(t,e,r,a,A,o,B,i){var E=new DataView(t),C=new Uint8Array(t),y=E.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var d=s.getStringFromTypedArray(C,r,y);d=d.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,""),r+=y;var P=E.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var f=0;f<P;f++){var c={},p=E.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;var T=E.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,c.rangeMode=T,c.rangeList=p;var L={};L.x=E.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,L.y=E.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,L.z=E.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var D=E.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT,c.boundingSphere={center:L,radius:D},y=E.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var g=s.getStringFromTypedArray(C,r,y);r+=y,g=Xt(g=g.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")),c.childTile=g}var F={},M=E.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;M>=3&&(E.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),E.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var I=E.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var m=new Uint8Array(t,r,I),v=r+I,_=u.pako.inflate(m).buffer;i.push(_),E=new DataView(_);C=new Uint8Array(_);r=0;var S=E.getUint32(r,!0),O=Pt(E,_,r+=Uint32Array.BYTES_PER_ELEMENT),N=O.buffer;r=O.byteOffset;var h=zt(M,N,E,O.dataViewByteOffset),R=r%4;0!==R&&(r+=4-R),Jt((O=Pt(E,_,r)).buffer,E,O.dataViewByteOffset,F,!1,void 0,void 0,M),r=O.byteOffset,3!==M&&((O=Pt(E,_,r)).buffer,r=O.byteOffset);var G={};!function(t,e,r,a,A,o,B,i,E,C){var y=i,d=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var P={},f=0;f<d;f++){var u=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var c=s.getStringFromTypedArray(o,y-i,u),p=(y+=u)%4;0!==p&&(y+=4-p),B.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var T=B.getUint8(y,!0);y+=Uint8Array.BYTES_PER_ELEMENT;var L=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var D=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var g=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var F=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var M,I=B.getUint32(y,!0);if(y+=Uint32Array.BYTES_PER_ELEMENT,a&&T){var m=y-i;M=o.subarray(m,m+F),y+=F}var v=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var _=[],S=0;S<v;S++){u=B.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var O=s.getStringFromTypedArray(o,y-i,u);y+=u,_.push(O),r[O]=c}var N=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var h=[];for(S=0;S<N;S++){u=B.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var R=s.getStringFromTypedArray(o,y-i,u);y+=u,h.push(R)}var G=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var x=[],b=void 0,U=c;if(a)b=e[c]={};else{var K=r[c];for(U=K;n.defined(K)&&K!==c;)U=K,K=r[K];n.defined(U)&&(b=e[U])}var H=0;for(S=0;S<G;S++){u=B.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var V=s.getStringFromTypedArray(o,y-i,u);if(y+=u,a){var w=V.split("_")[0];n.defined(b[w])?H++:b[w]=S-H}var Y=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var J=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var k=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var W=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var Z=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var X=[],Q=0;Q<Z;Q++){u=B.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var z=s.getStringFromTypedArray(o,y-i,u);y+=u;var j=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var q=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var $=B.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT,X.push({geoName:z,offset:j,count:q,texUnitIndex:$})}x.push({subName:V,offsetX:Y,offsetY:J,width:k,height:W,subVertexOffsetArr:X})}qt(b,t,x,P),n.defined(M)&&g===l.S3MPixelFormat.CRN_DXT5&&tt&&(M=et({data:M},C).bufferView),E[c]={id:c,rootTextureName:U,width:L,height:D,compressType:g,size:F,format:I,textureData:M,subTexInfos:x,requestNames:h}}for(var z in P)if(P.hasOwnProperty(z)){var rt=t[z].vertexPackage,at=P[z];for(var $ in at)at.hasOwnProperty($)&&jt(rt,at[$],$)}}(F,a,A,o,0,(O=Pt(E,_,r)).buffer,E,O.dataViewByteOffset,G,i),r=O.byteOffset;var x=E.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var b=C.subarray(r,r+x),K=s.getStringFromTypedArray(b);r+=x;var H=JSON.parse(K);(3===M&&(S=E.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),(S&at)==at)&&(te((O=Pt(E,_,r)).buffer,E,O.dataViewByteOffset,F,M),r=O.byteOffset);if(1==M){var V=h.pageLods,w=!0;for(f=0;f<V.length;f++){var Y=V[f];w=""===Y.childTile;for(var J=Y.geodes,k=0;k<J.length;k++)for(var W=J[k].skeletonNames,X=0;X<W.length;X++){var Q=W[X];if(w){var z=F[Q].vertexPackage;z.boundingSphere=U.calcBoundingSphereInWorker(1,z)}}}}B[d]={result:!0,groupNode:h,geoPackage:F,matrials:H,texturePackage:G,version:Z.S3M4,dataVersion:M,rootBatchIdMap:a,ancestorMap:A},v<e&&re(t,e,v,a,A,!1,B,i)}function ae(e,r){var a=e.buffer;if(e.isOSGB){if(n.defined(st)||new Promise((function(e,r){t(["./OSGBToS3M-caf1aa52"],e,r)})).then((function(t){(st=t.default).onRuntimeInitialized=function(){yt=!0},lt=st.cwrap("OSGBToS3MB","number",["number","number","number","number"])})),!yt)return null;var A;switch(e.suffix){case"dae":case"DAE":A=4;break;case"x":case"X":A=2;break;default:A=0}a=function(t,e,r){var a=st._malloc(20*e),n=st._malloc(Uint8Array.BYTES_PER_ELEMENT*e);st.HEAPU8.set(t,n/Uint8Array.BYTES_PER_ELEMENT);var A=lt(n,e,a,r),o=new Uint8Array(st.HEAPU8.buffer,a,A);return t=null,t=new Uint8Array(o).buffer,st._free(a),st._free(n),t}(new Uint8Array(a),a.byteLength,A)}var o=e.isS3MZ,B=e.fileType,i=e.supportCompressType,E=e.bVolume,C=e.isS3MBlock,y=e.modelMatrix,d=e.materialType,P=e.isCoverImageryLayer,f=e.transformPar,c=null,p=null,T=null;if(E&&e.volbuffer.byteLength<8&&(E=!1),E){var L=e.volbuffer,D=new Uint8Array(L,8),g=u.pako.inflate(D).buffer,F=new Float64Array(g,0,1),M=new Uint32Array(g,48,1);if(0===F[0]||3200===M[0]||3201===M[0]){var I=0;0==F[0]&&(I=8),r.push(g);var m=new Float64Array(g,I,6),v=m[0],_=m[1],S=m[2],O=m[3],N=m[4]<m[5]?m[4]:m[5],h=m[4]>m[5]?m[4]:m[5];p={left:v,top:_,right:S,bottom:O,minHeight:N,maxHeight:h,width:(c=new dt(v,O,S,_,N,h)).width,length:c.length,height:c.height};var R=new Uint32Array(g,48+I,7),G=R[0],x=R[1],b=R[2],K=R[3];T={nFormat:G,nSideBlockCount:x,nBlockLength:b,nLength:K,nWidth:R[4],nHeight:R[5],nDepth:R[6],imageArray:new Uint8Array(g,76+I,K*K*4)}}}var H=0,V={};V.ignoreNormal=e.ignoreNormal;var w=e.rootBatchIdMap||{},Y=e.ancestorMap||{},J={},k=new DataView(a),W=k.getFloat32(H,!0);if(H+=Float32Array.BYTES_PER_ELEMENT,C)return k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT,re(a,a.byteLength,H,w,Y,e.isRoot,J,r),J;var X=!1;if(W>=3&&(k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT),W>=2&&(k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT),ee(W-1)||ee(W-2)||ee(W-3)||W>2.09&&W<2.11){var Q=k.getUint32(H,!0);H+=Uint32Array.BYTES_PER_ELEMENT;var z=new Uint8Array(a,H,Q);a=u.pako.inflate(z).buffer,r.push(a),k=new DataView(a),H=0}else if(W>1.199&&W<1.201){Q=k.getUint32(H,!0);H+=Uint32Array.BYTES_PER_ELEMENT,r.push(a)}else{X=!0,H=0;Q=k.getInt32(H,!0);if(H+=Int32Array.BYTES_PER_ELEMENT,H+=Uint8Array.BYTES_PER_ELEMENT*Q,o){k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT;D=new Uint8Array(a,H);a=u.pako.inflate(D).buffer,r.push(a),k=new DataView(a),H=0}}var j=k.getUint32(H,!0),q=Pt(k,a,H+=Uint32Array.BYTES_PER_ELEMENT),$=q.buffer;H=q.byteOffset;var tt={},et=zt(W,$,k,q.dataViewByteOffset,tt,f),rt=H%4;0!==rt&&(H+=4-rt);var nt=W>2.09&&3!==W;if(Jt((q=Pt(k,a,H)).buffer,k,q.dataViewByteOffset,V,X,r,nt,W,y,tt,P,e.fileType,f),H=q.byteOffset,nt)for(var At=0;At<et.pageLods.length;At++)for(var ot=et.pageLods[At],Bt=ot.geodes,it=0;it<Bt.length;it++)for(var Et=Bt[it].skeletonNames,Ct=0;Ct<Et.length;Ct++){var ut=Et[Ct];n.defined(V[ut].max)&&(n.defined(ot.max)?(ot.max.x=Math.max(V[ut].max.x,ot.max.x),ot.max.y=Math.max(V[ut].max.y,ot.max.y),ot.max.z=Math.max(V[ut].max.z,ot.max.z),ot.min.x=Math.min(V[ut].min.x,ot.min.x),ot.min.y=Math.min(V[ut].min.y,ot.min.y),ot.min.z=Math.min(V[ut].min.z,ot.min.z)):(ot.max=V[ut].max,ot.min=V[ut].min))}3!==W&&((q=Pt(k,a,H)).buffer,H=q.byteOffset);var ct={};!function(t,e,r,a,n,A){var o=0,B=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var i=0;i<B;i++){var E=ft(r,a,e,o),C=E.string,s=(o=E.bytesOffset)%4;0!==s&&(o+=4-s);var y=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var d=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var P=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var f=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var u=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var c=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var p=e.subarray(o,o+u);o+=u;var T=null,L=f;f===l.S3MCompressType.enrS3TCDXTN&&1!=t?(l.DXTTextureDecode.decode(T,d,P,p,c),T=c>l.S3MPixelFormat.BGR||c===l.S3MPixelFormat.LUMINANCE_ALPHA?new Uint8Array(d*P*4):new Uint16Array(d*P),l.DXTTextureDecode.decode(T,d,P,p,c),A.push(T.buffer),f=0):T=p,n[C]={id:C,width:d,height:P,compressType:f,oriCompressType:L,nFormat:c,imageBuffer:T,mipmapLevel:y}}}(i,(q=Pt(k,a,H)).buffer,k,q.dataViewByteOffset,ct,r),H=q.byteOffset;var pt=k.getUint32(H,!0);H+=Uint32Array.BYTES_PER_ELEMENT;var Tt=new Uint8Array(a).subarray(H,H+pt),Lt=s.getStringFromTypedArray(Tt);H+=pt,Lt=Lt.replace(/\n\0/,"");var Dt=JSON.parse(Lt);(3===W&&(j=k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT),(j&at)==at)&&te((q=Pt(k,a,H)).buffer,k,q.dataViewByteOffset,V,W);if(1==W){var gt=et.pageLods,Ft=!0;for(At=0;At<gt.length;At++){var Mt=gt[At];Ft=""===Mt.childTile;for(var It=Mt.geodes,mt=0;mt<It.length;mt++){Et=It[mt].skeletonNames;for(var vt=0;vt<Et.length;vt++){var _t=Et[vt];if(Ft){var St=V[_t].vertexPackage;St.boundingSphere=U.calcBoundingSphereInWorker(B,St)}}}}}return"BatchPBR"===d&&function(t,e,r){for(var a in delete t.ignoreNormal,t)if(t.hasOwnProperty(a)){var A=t[a],o=A.arrIndexPackage;if(o.length<1)continue;if(1===o.length||2===o.length&&13===o[1].primitiveType){var B=A.vertexPackage.attrLocation.aTextureCoordMatrix;if(void 0!==B){if((i=(O=A.vertexPackage.vertexAttributes[B]).typedArray)[0]<0)continue}else if(void 0!==(B=A.vertexPackage.attrLocation.aTextureCoordMatrix||A.vertexPackage.attrLocation.aTexCoord0)){O=A.vertexPackage.vertexAttributes[B];var i=new Float32Array(O.typedArray.buffer,O.typedArray.byteOffset,O.typedArray.byteLength/4);if(3===O.componentsPerAttribute&&i[2]<0)continue}}var E,C,s=0,y={},d=void 0;for(E=0,C=o.length;E<C;E++)13!==o[E].primitiveType?s+=o[E].indicesTypedArray.byteLength:d=o[E],0===E&&(y.indicesCount=0,y.indexType=o[E].indexType,y.primitiveType=o[E].primitiveType,y.materialCode=o[E].materialCode);y.indicesCount=s/2;var P=A.vertexPackage.verticesCount>65535?new Uint32Array(s/2):new Uint16Array(s/2),f=0;for(E=0,C=o.length;E<C;E++)if(13!==(N=o[E]).primitiveType){var u=0===N.indexType?Uint16Array:Uint32Array,c=0===N.indexType?N.indicesTypedArray.byteLength/2:N.indicesTypedArray.byteLength/4,p=new u(N.indicesTypedArray.buffer,N.indicesTypedArray.byteOffset,c);P.set(p,f),f+=p.length}y.indicesTypedArray=P,A.arrIndexPackage=[y],n.defined(d)&&(A.arrIndexPackage.push(d),A.edgeGeometry=l.S3MEdgeProcessor.createEdgeDataByIndices(A.vertexPackage,d));var T=2*o.length*4,L=new Float32Array(T),D={};for(E=0,C=r.material.length;E<C;E++)D[(h=r.material[E].material).id]=h;for(E=0,C=o.length;E<C;E++)if(h=D[(N=o[E]).materialCode]){var g=h.pbrMetallicRoughness;if(g){L[8*E]=g.metallicFactor,L[8*E+1]=g.roughnessFactor,L[8*E+2]=h.alphaCutoff;var F=""===h.alphaMode?0:1,M="none"===h.cullMode?0:1;L[8*E+3]=M|F<<16,L[8*E+4]=g.emissiveFactor.x,L[8*E+5]=g.emissiveFactor.y,L[8*E+6]=g.emissiveFactor.z,L[8*E+7]=0,h.pbrIndex=E}}var I="PBRMaterialParam_"+a;for(E=0,C=r.material.length;E<C;E++)if((h=r.material[E].material).id===y.materialCode){h.textureunitstates.push({textureunitstate:{addressmode:{u:0,v:0,w:0},filteringoption:0,filtermax:2,filtermin:2,id:I,texmodmatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],url:""}});break}var m,v,_=A.vertexPackage,S=_.attrLocation.aTexCoord1;if(void 0!==S){var O=_.vertexAttributes[S];m=new Float32Array(2*_.verticesCount),O.typedArray=m}else m=new Float32Array(2*_.verticesCount),S=_.vertexAttributes.length,_.attrLocation.aTexCoord1=S,_.vertexAttributes.push({index:S,typedArray:m,componentsPerAttribute:2,componentDatatype:5126,offsetInBytes:0,strideInBytes:8,normalize:!1});for(void 0!==(S=_.attrLocation.aColor)&&(v=(O=_.vertexAttributes[S]).typedArray),E=0,C=o.length;E<C;E++){var N,h;if((h=D[(N=o[E]).materialCode])&&h.pbrMetallicRoughness)for(var R=h.pbrMetallicRoughness.baseColor,G=void 0!==v,x=h.pbrIndex,b=(P=N.indicesTypedArray,0),U=(P=0===N.indexType?new Uint16Array(P.buffer,P.byteOffset,P.byteLength/2):new Uint32Array(P.buffer,P.byteOffset,P.byteLength/4)).length;b<U;b++){var K=P[b];m[2*K]=x,G&&(v[4*K]=255*R.x,v[4*K+1]=255*R.y,v[4*K+2]=255*R.z,v[4*K+3]=255*R.w)}}e[I]={id:I,width:2*o.length,height:1,compressType:0,nFormat:25,imageBuffer:L,mipmapLevel:0}}}(V,ct,Dt),{result:!0,groupNode:et,geoPackage:V,matrials:Dt,texturePackage:ct,version:Z.S3M4,dataVersion:W,volImageBuffer:T,volBounds:p}}function ne(){n.defined(q)&&n.defined(rt)&&(q.onRuntimeInitialized=function(){tt=!0},self.onmessage=e(ae),self.postMessage(!0))}return function(r){if("undefined"==typeof WebAssembly)return self.onmessage=e(ae),void self.postMessage(!0);var A=r.data.webAssemblyConfig;return n.defined(A)?a.FeatureDetection.isInternetExplorer()?t([y.buildModuleUrl("ThirdParty/Workers/ie-webworker-promise-polyfill.js")],(function(e){return self.Promise=e,-1!==A.modulePath.indexOf("crunch")?t([A.modulePath],(function(t){n.defined(A.wasmBinaryFile)?(n.defined(t)||(t=self.Module),q=t,ne()):(q=t,ne())})):t([A.modulePath],(function(t){n.defined(A.wasmBinaryFile)?(n.defined(t)||(t=self.DracoDecoderModule),t(A).then((function(t){rt=t,ne()}))):(rt=t(),ne())}))})):-1!==A.modulePath.indexOf("crunch")?t([A.modulePath],(function(t){n.defined(A.wasmBinaryFile)?(n.defined(t)||(t=self.Module),q=t,ne()):(q=t,ne())})):t([A.modulePath],(function(t){n.defined(A.wasmBinaryFile)?(n.defined(t)||(t=self.DracoDecoderModule),t(A).then((function(t){rt=t,ne()}))):(rt=t(),ne())})):void 0}}));
