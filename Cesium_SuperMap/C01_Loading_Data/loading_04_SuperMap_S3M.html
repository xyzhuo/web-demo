<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>加载S3M缓存</title>
    <!-- 本地引入依赖 -->
    <link href="../lib/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="../lib/Cesium/Cesium.js"></script>

    <!-- 使用远程依赖 -->
    <!-- <link href="http://47.107.49.127:8090/iserver/services/3D-xihaian/rest/static/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="http://47.107.49.127:8090/iserver/services/3D-xihaian/rest/static/Build/Cesium/Cesium.js"></script> -->

    <!-- Earth -->
    <!--<link href="http://www.supermapol.com/earth/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script type="text/javascript" src="http://www.supermapol.com/earth/Build/Cesium/Cesium.js"></script>-->

    <!--<script src="http://support.supermap.com.cn:8090/webgl/examples/webgl/js/supermap/SuperMap-7.1-11828.js"></script>-->

    <!--<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>-->
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }
        
        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="cesiumContainer"></div>

    <script type="text/javascript">
        var viewer;

        viewer = new Cesium.Viewer('cesiumContainer');
        let scene = viewer.scene;
        scene.debugShowFramesPerSecond = true; //显示帧率，默认不显示

        /**********************************************************************************************
         * 
         * 1、通过scene.open()的方式加载
         * 
         *********************************************************************************************/
        let sceneUrl = "http://www.supermapol.com/realspace/services/3D-suofeiya_church/rest/realspace";
        let sceneName = undefined; // 场景名称，如果服务地址中有多个场景，需要指定场景名称
        let promise = scene.open(sceneUrl, sceneName, {
            // subdomains: ["8091", "8092", "8093"], // 子域配置，url需要替换为 http://www.supermapol.com:{s}/realspace/services/3D-suofeiya_church/rest/realspace"
            autoSetView: false // 是否自动定位到模型，默认为ture
        });
        promise.then(layers => {
            console.log(`open()方式加载，layers`, layers);
        });

        /**********************************************************************************************
         * 
         * 2、通过scene.addS3MTilesLayerByScp()
         * 
         *********************************************************************************************/
        let scpUrl = "http://www.supermapol.com/realspace/services/3D-data_all/rest/realspace/datas/合并前楼板@九号楼/config"
        let scpPromise = scene.addS3MTilesLayerByScp(scpUrl, {
            autoSetView: true, // 是否自动定位到图层
            name: "合并前楼板@九号楼" // scp图层名称
        });
        scpPromise.then(layer => {

            console.log("scp方式加载，layer", layer);

            // 相加飞行到某一视角
            scene.camera.setView({
                destination: Cesium.Cartesian3.fromDegrees(13.0353, 47.8084, 100.0),
                orientation: {
                    heading: 0.7272,
                    pitch: -0.2672,
                    roll: 0
                }
            });
        });

        // scp使用多子域的方式
        // let scpConfig = {
        //     subdomainConfig: {
        //         urlScheme: "http://{s}.xuyizhuo.com/iserver/services/3D-BIM/rest/realspace", // 服务地址模板{s}
        //         subdomains: ['t1', 't2'] // 子域配置
        //     },
        //     name: "BIM" // scp图层名称
        // };
        // let scpUrl = "http://localhost:8090/iserver/services/3D-BIM/rest/realspace/datas/BIM/config"
        // let scpPromise = scene.addS3MTilesLayerByScp(scpUrl, scpConfig);
        // scpPromise.then(layer => {
        //     console.log("scp多子域方式加载，layer", layer);
        // });
    </script>
</body>

</html>