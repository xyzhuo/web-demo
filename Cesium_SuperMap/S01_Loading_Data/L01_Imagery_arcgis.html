<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>加载ArcGIS地图服务</title>

    <!-- 本地引入依赖 -->
    <link href="../lib/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="../lib/Cesium/Cesium.js"></script>

    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="cesiumContainer"></div>

    <script type="text/javascript">
        let viewer;

        viewer = new Cesium.Viewer("cesiumContainer", {
            infoBox: false
        });
        let scene = viewer.scene;
        // scene.debugShowFramesPerSecond = true; //显示帧率，默认不显示

        /***************************************************************************************
         *
         * （1）通过ArcGisMapServerImageryProvideri接口，但不支持CGCS2000坐标系
         *
         **************************************************************************************/
        // // let url = "https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"; // 加载ArcGIS街道地图
        // let arcgisImageryProvider = new Cesium.ArcGisMapServerImageryProvider({
        //     url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
        // })
        // viewer.imageryLayers.addImageryProvider(arcgisImageryProvider);



        /***************************************************************************************
         *
         * （2）通过CGCS2000MapServerImageryProvideri接口，支持CGCS2000、WGS84、全球墨卡托等坐标系
         *      Arcgis Rest 在线影像服务：https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer
         *
         **************************************************************************************/
        let layer = viewer.imageryLayers.addImageryProvider(new Cesium.CGCS2000MapServerImageryProvider({
            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",
            // suggest: true,//4490坐标系，按照suggest切片方案切的瓦片,需要设置该参数
        }));
        // viewer.flyTo(layer);



        /***************************************************************************************
         *
         * （3）通过WebMapTileServiceImageryProvider接口，构造WMTS地址
         *      Arcgis Server中一般会提供一个WMTS服务的接口
         *      Arcgis rest: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
         *      Arcgis WMTS: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/WMTS"
         *
         **************************************************************************************/
        let wmtsLayer = viewer.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({
            url: "http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/WMTS",
            layer: "ChinaOnlineStreetPurplishBlue",
            style: "default",
            format: "image/jpgpng",
            tileMatrixSetID: "default028mm",
            // // 这个WMTS服务是墨卡托坐标系(3857)的，所以指定为WebMercatorTilingScheme。地理坐标系使用：GeographicTilingScheme
            tilingScheme: new Cesium.WebMercatorTilingScheme(),
            // 指定瓦片层级，默认是从0级开始
            tileMatrixLabels: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20"],
            maximumLevel: 19, // 图层的最大层级
        }));
        console.log(wmtsLayer);

        wmtsLayer.alpha = 0.5;

        viewer.flyTo(wmtsLayer);
    </script>
</body>

</html>