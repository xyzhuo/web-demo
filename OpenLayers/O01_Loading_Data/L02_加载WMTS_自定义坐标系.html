<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>加载WMTS服务</title>
    <link rel="stylesheet" href="https://iclient.supermap.io/web/libs/openlayers/6.9.0/ol.css" />
    <script src="https://iclient.supermap.io/web/libs/openlayers/6.9.0/ol.js"></script>

    <link rel="stylesheet" href="https://iclient.supermap.io/dist/ol/iclient-ol.min.css" />
    <script src="https://iclient.supermap.io/dist/ol/iclient-ol-es6.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        html,
        body,
        #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script type="text/javascript">
        // 地址：http://epsg.io/
        // 自定义坐标系
        // var projection_4526 = new ol.proj.Projection({
        //     code: "EPSG:4526",
        //     extent: [-948.75 - 543592.47, 5817.41 - 3333128.95],
        //     units: "m",
        //     axisOrientation: "neu"
        // });
        // proj4.defs("EPSG:4526", "+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=GRS80 +units=m +no_defs");
        proj4.defs([
            ["EPSG:4526", "+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"],
            ["EPSG:4490", "+proj=longlat +ellps=GRS80 +no_defs"]
        ]);
        ol.proj.proj4.register(proj4);

        //测试是否引入成功
        // const position = ol.proj.transform([0, 0], 'EPSG:4326', 'EPSG:4526');
        const position = ol.proj.transform([493393.15, 2526354.13], 'EPSG:4326', 'EPSG:4490');
        console.log(position);

        var map;
        var url = "http://192.168.1.2:8090/iserver/services/map-FangHuoLinDai/rest/maps/生物防火林带4547%40防火林带2022";
        map = new ol.Map({
            target: "map",
            controls: ol.control.defaults({
                    attributionOptions: {
                        collapsed: false,
                    },
                })
                .extend([new ol.supermap.control.Logo()]),
            view: new ol.View({
                center: [493393.15, 2526354.13],
                zoom: 8,
                projection: "EPSG:4526",
                multiWorld: true,
            }),
        });
        var layer = new ol.layer.Tile({
            opacity: 0.5,
            source: new ol.source.TileSuperMapRest({
                url: url,
                wrapX: true,
            }),
            projection: "EPSG:4526",
        });
        map.addLayer(layer);
    </script>
</body>

</html>