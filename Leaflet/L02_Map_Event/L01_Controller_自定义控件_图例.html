<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Leaflet自定义控件-图例</title>
    <!-- 1 引入Leaflet依赖 -->
    <!-- 1.1 Leaflet CSS依赖 -->
    <link rel="stylesheet" href="../lib/leaflet/leaflet@1.7.1/dist/leaflet.css">
    <!-- 1.2 Leaflet JS依赖 -->
    <script type="text/javascript" src="../lib/leaflet/leaflet@1.7.1/dist/leaflet.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
        }
    </style>

    <!-- 2 引入SuperMap提供的Leaflet插件依赖 -->
    <!-- 2.1 引入SuperMap提供的Leaflet插件CSS依赖 -->
    <link rel="stylesheet" href="../lib/leaflet/leaflet.supermap.iclient/10.1.2/iclient-leaflet.css">
    <!-- 2.2 引入SuperMap提供的Leaflet插件CSS依赖 -->
    <script type="text/javascript" src="../lib/leaflet/leaflet.supermap.iclient/10.1.2/iclient-leaflet.js"></script>
</head>

<body style=" margin: 0;overflow: hidden;background: #fff;width: 100%;height:100%;position: absolute;top: 0;">
    <div id="map" style="margin:0 auto;width: 100%;height: 100%"></div>
    <div id="latlngInfo" style="position: absolute;z-index: 9999;left: 10px;bottom: 0px;"></div>
    <script type="text/javascript">
        let map = L.map("map", {
            center: [23, 113],
            maxZoom: 18,
            zoom: 5,
            crs: L.CRS.EPSG4326
        });

        // 添加地图
        L.tileLayer("http://t{s}.tianditu.com/img_c/wmts?layer=img&style=default&tilematrixset=c&Service=WMTS&Request=GetTile&Version=1.0.0&Format=tiles&TileMatrix={z}&TileCol={x}&TileRow={y}&tk=93724b915d1898d946ca7dc7b765dda5", {
            subdomains: [0, 1, 2, 3, 4, 5, 6, 7],
            maxZoom: 17,
            tileSize: 256,
            zoomOffset: 1,
            minZoom: 3
        }).addTo(map);

        L.Control.Legend = L.Control.extend({
            options: {
                position: 'topright' //初始位置


            },
            initialize: function(options) {
                L.Util.extend(this.options, options);

            },
            onAdd: function(map) {
                //创建一个class为info legend的div
                this._container = L.DomUtil.create('div', 'info legend');
                // 通过style修改样式
                this._container.style.background = "#dddbd7";
                this._container.style.borderRadius = "5px";
                this._container.style.padding = "5px";

                //创建一个图片要素
                var grades = [0, 10, 20, 50, 100, 200, 500, 1000],
                    labels = [],
                    from, to;

                for (var i = 0; i < grades.length; i++) {
                    from = grades[i];
                    to = grades[i + 1];

                    labels.push(
                        '<i style="background:' + this._getColor(from + 1) + ';width: 20px;height: 20px;display: block;"></i> ' +
                        from + (to ? '&ndash;' + to : '+'));
                }

                this._container.innerHTML = labels.join('<br>');
                return this._container;
            },
            _getColor: function(d) {
                return d > 1000 ? '#800026' :
                    d > 500 ? '#BD0026' :
                    d > 200 ? '#E31A1C' :
                    d > 100 ? '#FC4E2A' :
                    d > 50 ? '#FD8D3C' :
                    d > 20 ? '#FEB24C' :
                    d > 10 ? '#FED976' :
                    '#FFEDA0';
            },
            onRemove: function(map) {
                // Nothing to do here
            }
        });
        L.control.legend = function(opts) {
            return new L.Control.Legend(opts);
        }

        var legend = L.control.legend({
            position: 'bottomright'
        });
        //添加图例
        legend.addTo(map);
    </script>
</body>

</html>